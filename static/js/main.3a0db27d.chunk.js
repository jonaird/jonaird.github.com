(window.webpackJsonpbsvnewsv3=window.webpackJsonpbsvnewsv3||[]).push([[0],{107:function(e,t,a){e.exports=a(260)},112:function(e,t,a){},114:function(e,t,a){},260:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(101),o=a.n(r),i=(a(112),a(1)),c=a.n(i),l=a(3),d=a(4),u=a(5),m=a(8),p=a(7),v=a(13),h=a(9),f=(a(114),a(30).default);function b(e){for(var t="",a=0;a<e.length;a++)t+=""+e.charCodeAt(a).toString(16);return t}var y=function(e){function t(e){var a;Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).upvoteClickHandler=function(){if(a.props.user){console.log("click");var e="#"+a.props.data._id+"slidingView",t=a.state.upvoteButtonClicked,n="#"+a.props.data._id+"button";t?(window.$(e).animate({width:"0"},200,"linear"),window.$(n).animate({opacity:0},500,"linear"),a.setState({upvoteButtonClicked:!1})):(window.$(e).animate({width:"170"},500,"easeOutExpo"),window.$(n).animate({opacity:.15},500,"linear"),a.setState({upvoteButtonClicked:!0}))}else a.props.loginHandler()},a.upvoteHandler=function(){document.getElementById(a.props.data._id+"button").click(),a.setState({alreadyVoted:!0,voteTotal:a.state.voteTotal+=.05})};var n=!1;return e.user&&e.data.votes.includes(a.props.user.id)&&(n=!0),a.state={upvoteButtonClicked:!1,alreadyVoted:n,voteTotal:e.data.voteTotal},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,a=this.state.voteTotal.toString();"."==a[a.length-2]&&(a+="0");var n=this.props.data.username,r=this.props.data.comment,o=[],i=this.props.user&&this.props.data.userId===this.props.user.id,c=this.props.data._id+"button",l=this.props.data._id+"slidingView",d=this.state.alreadyVoted;this.props.user&&(d=this.state.alreadyVoted||this.props.data.votes.includes(this.props.user.id));var u=!0,m=!1,p=void 0;try{for(var v,h=this.props.data.comments[Symbol.iterator]();!(u=(v=h.next()).done);u=!0){var y=v.value;o.push(s.a.createElement(t,{loginHandler:this.props.loginHandler,user:this.props.user,changeQueryHandler:this.props.changeQueryHandler,replyHandler:this.props.replyHandler,data:y,key:y._id}))}}catch(E){m=!0,p=E}finally{try{u||null==h.return||h.return()}finally{if(m)throw p}}return s.a.createElement("div",{style:{}},s.a.createElement("div",{class:"div-block-40"},s.a.createElement("div",{class:"content-item"},s.a.createElement("div",{class:"content-item-top content-item-top-comment"},s.a.createElement("div",{class:"div-block-8"},s.a.createElement("div",{class:"text-block-8"},"$",a),s.a.createElement("div",{class:"text-block-9",onClick:function(){return e.props.changeQueryHandler({type:"userFeed",userId:e.props.data.userId,contentType:"post",sort:"new",timePeriod:"month"})}},n),s.a.createElement("div",{class:"text-block-6"},function(e){var t=Math.floor((new Date-e)/1e3),a=Math.floor(t/31536e3);return a>1?a+" years":(a=Math.floor(t/2592e3))>1?a+" months":(a=Math.floor(t/86400))>1?a+" days":(a=Math.floor(t/3600))>1?a+" hours":(a=Math.floor(t/60))>1?a+" minutes":Math.floor(t)+" seconds"}(1e3*this.props.data.timestamp)," ago")),s.a.createElement("div",{class:"content-item-content content-item-content-post-view-comment"},s.a.createElement("div",{class:"content-comment-post-view"},r),s.a.createElement("div",{class:"div-block-10 action-bar-comment"},s.a.createElement("div",{class:"div-block-11"},i?null:s.a.createElement("div",{class:"action-bar-button action-bar-button-comment action-bar-button-comment-left"},s.a.createElement("div",{class:"post-action"},d?"\ud83d\uddf3\ufe0f\u2714\ufe0f":"Upvote")),s.a.createElement("div",{class:i?"action-bar-button action-bar-button-comment action-bar-button-comment-left":"action-bar-button action-bar-button-comment",onClick:function(){return e.props.replyHandler(e.props.data)}},s.a.createElement("div",{class:"post-action"},"Reply"))))))),i?null:s.a.createElement("div",{style:{backgroundColor:"black",opacity:0,marginLeft:90},onClick:this.state.alreadyVoted?null:this.upvoteClickHandler,id:c,class:"div-block-44"}),s.a.createElement("div",{style:{width:"0PX"},id:l,class:"div-block-41"},s.a.createElement("div",{class:"div-block-42"},s.a.createElement("div",{class:"div-block-43"},this.props.user?s.a.createElement(f,{label:"upvote",onPayment:this.upvoteHandler,outputs:[{amount:0,currency:"BSV",type:"SCRIPT",script:"OP_RETURN "+b("13beK8bifnhuC8pawWvMrPCaWoTQi5LnZf")+" "+b("post/vote")+" "+b("vote")+" "+b(this.props.data._id)+" "+b(this.props.user.id)},{to:this.props.data.transaction.in[0].e.a,amount:"0.05",currency:"USD"}]}):null)))),s.a.createElement("div",{style:{paddingLeft:40}},o))}}]),t}(s.a.Component),E=a(30).default;function g(e){for(var t="",a=0;a<e.length;a++)t+=""+e.charCodeAt(a).toString(16);return t}var w=function(e){function t(e){var a;Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).upvoteClickHandler=function(){if(a.props.user){var e="#"+a.props.data._id+"slidingView",t=a.state.upvoteButtonClicked,n="#"+a.props.data._id+"button";t?(window.$(e).animate({width:"0"},200,"linear"),window.$(n).animate({opacity:0},500,"linear"),a.setState({upvoteButtonClicked:!1})):(window.$(e).animate({width:"170"},500,"easeOutExpo"),window.$(n).animate({opacity:.15},500,"linear"),a.setState({upvoteButtonClicked:!0}))}else a.props.loginHandler()},a.upvoteHandler=function(){document.getElementById(a.props.data._id+"button").click(),a.setState({alreadyVoted:!0,voteTotal:a.state.voteTotal+=.05})};var n=!1;return e.user&&e.data.votes.includes(e.user.id)&&(n=!0),a.state={upvoteButtonClicked:!1,alreadyVoted:n,voteTotal:e.data.voteTotal},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.props.data._id,this.props.data._id,this.state.upvoteButtonClicked}},{key:"render",value:function(){var e=this,t=this.state.voteTotal.toString();"."==t[t.length-2]&&(t+="0");var a=this.props.data.username,n=this.props.data.title,r=this.props.data.description,o=this.props.data.numberOfComments,i=this.props.data._id+"button",c=this.props.data._id+"slidingView",l=this.props.postView,d=[],u=this.state.alreadyVoted;this.props.user&&(u=this.state.alreadyVoted||this.props.data.votes.includes(this.props.user.id));var m=this.props.user&&this.props.data.userId===this.props.user.id;o=null;if(l||(o=s.a.createElement("div",{class:"action-bar-button action-bar-button-right",onClick:function(){return e.props.changeQueryHandler({type:"post",post:e.props.data._id})}},s.a.createElement("div",{class:"post-action"},this.props.data.numberOfComments+" comments"))),l){var p=!0,v=!1,h=void 0;try{for(var f,b=this.props.data.comments[Symbol.iterator]();!(p=(f=b.next()).done);p=!0){var w=f.value;d.push(s.a.createElement(y,{loginHandler:this.props.loginHandler,user:this.props.user,changeQueryHandler:this.props.changeQueryHandler,replyHandler:this.props.replyHandler,data:w}))}}catch(k){v=!0,h=k}finally{try{p||null==b.return||b.return()}finally{if(v)throw h}}}return s.a.createElement("div",null,s.a.createElement("div",{class:"div-block-40"},s.a.createElement("div",{class:"content-item"},s.a.createElement("div",{class:"content-item-top"},s.a.createElement("div",{class:"div-block-8"},s.a.createElement("div",{class:"text-block-8"},"$"+t),s.a.createElement("div",{class:"text-block-9",onClick:function(){return e.props.changeQueryHandler({type:"userFeed",userId:e.props.data.userId,contentType:"post",sort:"new",timePeriod:"month"})}},a),s.a.createElement("div",{class:"text-block-6"},function(e){var t=Math.floor((new Date-e)/1e3),a=Math.floor(t/31536e3);return a>1?a+" years":(a=Math.floor(t/2592e3))>1?a+" months":(a=Math.floor(t/86400))>1?a+" days":(a=Math.floor(t/3600))>1?a+" hours":(a=Math.floor(t/60))>1?a+" minutes":Math.floor(t)+" seconds"}(1e3*this.props.data.timestamp)+" ago")),s.a.createElement("div",{class:"content-item-content"},s.a.createElement("div",null,s.a.createElement("strong",{class:"post-title",onClick:function(){return window.open(e.props.data.url,"_blank")}},n)),s.a.createElement("div",{class:"post-description"},r))),s.a.createElement("div",{class:"div-block-10"},s.a.createElement("div",{class:"div-block-11"},m?null:s.a.createElement("div",{class:"action-bar-button"},s.a.createElement("div",{class:"post-action"},u?"\ud83d\uddf3\ufe0f\u2714\ufe0f":"Upvote")),s.a.createElement("div",{class:"action-bar-button",onClick:function(){return e.props.replyHandler(e.props.data)}},s.a.createElement("div",{class:"post-action"},"Reply")),o))),m?null:s.a.createElement("div",{style:{backgroundColor:"black",opacity:0},onClick:u?null:this.upvoteClickHandler,id:i,class:"div-block-44"}),s.a.createElement("div",{style:{width:"0PX"},id:c,class:"div-block-41"},s.a.createElement("div",{class:"div-block-42"},s.a.createElement("div",{class:"div-block-43"},!this.props.user||m||u?null:s.a.createElement(E,{label:"upvote",onPayment:this.upvoteHandler,outputs:[{amount:0,currency:"BSV",type:"SCRIPT",script:"OP_RETURN "+g("13beK8bifnhuC8pawWvMrPCaWoTQi5LnZf")+" "+g("post/vote")+" "+g("vote")+" "+g(this.props.data._id)+" "+g(this.props.user.id)},{to:this.props.data.transaction.in[0].e.a,amount:"0.05",currency:"USD"}]}),s.a.createElement("div",{id:"my-money-button"}))))),s.a.createElement("div",{style:{paddingLeft:40}},d))}}]),t}(s.a.Component),k=(a(61).MoneyButtonClient,function(e){return s.a.createElement("div",{class:"bsvnews-bar nav-bar"},s.a.createElement("div",{class:"bar-left"},s.a.createElement("div",{class:"bar-item bar-item-left",onClick:function(){return e.changeQueryHandler({type:"feed",contentType:"post",sort:"top",timePeriod:"week"})}},s.a.createElement("div",{class:"text-block"},"BSV NEWS"))),s.a.createElement("div",{class:"bar-right"},s.a.createElement("div",{"data-w-id":"bfd75da2-a558-1d42-930b-2d1c229e9153",class:"bar-item bar-item-right bar-item-vertical"},s.a.createElement("div",{class:"div-block-2"},s.a.createElement("div",{class:"text-block-3"}," Reward Pool:",s.a.createElement("br",null))),s.a.createElement("div",{class:"text-block-4"},"$25")),s.a.createElement("div",{"data-w-id":"a208a93f-16ae-9a9a-5d0b-dc012b7a4a6d",class:"bar-item bar-item-right boost-button"},s.a.createElement("div",{class:"cta-button"},s.a.createElement("div",{"white-space":"nowrap",class:"text-block-5"},"Boost"))),s.a.createElement("div",{"data-w-id":"a1a6d7e7-53fb-49c3-4671-745f2b7ac08b",onClick:function(){setTimeout((function(){document.getElementsByClassName("div-block-17")[0].scrollTop=document.getElementsByClassName("div-block-17")[0].scrollHeight}),20)},class:"bar-item bar-item-right chat-button bar-item-chat-button"},s.a.createElement("img",{src:"https://bico.media/517a09f903abb8f3e723c77ca5053aa16235bbdec8760753a0837c85a4cfe521",alt:""})),s.a.createElement("div",{"data-w-id":"b210fbe5-474f-7680-84c9-3c03a7f46447",class:"bar-item bar-item-right menu-button"},s.a.createElement("div",{class:"div-block-21"},s.a.createElement("img",{src:"https://bico.media/28de6e88249bd34f7ddd9df986c5a330a1804bd3b1fad5059544c7990f809830",alt:""})),s.a.createElement("div",{class:"div-block-22"}),s.a.createElement("div",{"data-w-id":"e7b8d81a-166b-7bb5-40c3-0b8d93e8a08c",style:{display:"none",height:"0PX"},class:"div-block-22"},e.user?s.a.createElement("div",{style:{cursor:"pointer"},onClick:function(){return e.changeQueryHandler({type:"userFeed",userId:e.user.id,contentType:"post",timePeriod:"all time"})},"data-w-id":"e7b8d81a-166b-7bb5-40c3-0b8d93e8a08d",class:"div-block-23"},s.a.createElement("div",{class:"text-block-14"},"Profile")):null,s.a.createElement("div",{"data-w-id":"b0f6535a-fe81-b57b-bf2e-c1e186875e2a",style:{cursor:"pointer"},class:"div-block-23",onClick:function(){e.user?(localStorage.clear(),window.location.reload()):e.loginHandler()}},s.a.createElement("div",{class:"text-block-14"},e.user?"Logout":"Login"," ")))),s.a.createElement("div",{"data-w-id":"73708752-5d81-4803-bd56-9bf062f332a6",style:{display:"none"},onClick:function(){return setTimeout((function(){document.getElementsByClassName("div-block-4")[0].style="display: flex;"}),50)},id:"close-discussion",class:"bar-item bar-item-right bar-item-right-discussion-close"},s.a.createElement("div",{class:"username"},"X"))))}),C=function(e){var t=e.data.amountEarned.toString();return"."==t[t.length-2]&&(t+="0"),s.a.createElement("div",{class:"content-item content-item-profile"},s.a.createElement("div",{class:"div-block-31"},s.a.createElement("div",{class:"text-block-17"},e.data.username),s.a.createElement("div",{class:"div-block-32"},s.a.createElement("div",{class:"profile-stat"},s.a.createElement("div",{class:"text-block-19"},"Posts"),s.a.createElement("div",{class:"text-block-18"},e.data.numPosts)),s.a.createElement("div",{class:"profile-stat"},s.a.createElement("div",{class:"text-block-19"},"Comments"),s.a.createElement("div",{class:"text-block-18"},e.data.numComments)),s.a.createElement("div",{class:"profile-stat profile-stat-right"},s.a.createElement("div",{class:"text-block-19"},"Votes"),s.a.createElement("div",{class:"text-block-18"},e.data.numVotes)))),s.a.createElement("div",{class:"div-block-33"},s.a.createElement("div",{class:"text-block-20"},"Earned"),s.a.createElement("div",{class:"text-block-21"},"$"+t)))},S=a(105),O=a(17),H=a.n(O);function x(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var j=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).changeQuery=function(e){var t=e.contentType,n=e.sort,s=e.timePeriod;t?document.getElementById("sort").click():n?document.getElementById("by").click():s&&document.getElementById("from").click();var r=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?x(a,!0).forEach((function(t){Object(S.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):x(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},a.props.query,{},e);a.setState({query:r}),a.props.changeSortAndFilter(r)},a.inputChangeHandler=function(){a.changeQuery({search:document.getElementById("name-3").value})},a.state={query:a.props.query},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e,t,a,n,r=this;switch(e="comment"==this.props.query.contentType?"Comments":"Posts",t="top"==this.props.query.sort?"Top":"new"==this.props.query.sort?"New":"Hot",this.props.query.timePeriod){case"day":a="Day";break;case"week":a="Week";break;case"month":a="Month";break;case"all time":a="All Time"}return n=JSON.parse(this.props.latestQuery).search?JSON.parse(this.props.latestQuery).search:"",s.a.createElement("div",{style:{width:"100%"}},s.a.createElement("div",{class:"w-form"},s.a.createElement("form",{id:"email-form-3",name:"email-form-3","data-name":"Email Form 3"},s.a.createElement("input",{type:"text",autoComplete:"off",value:n,class:"text-field-5 w-input",maxlength:"256",name:"name-3","data-name":"Name 3",placeholder:"Search",id:"name-3",onChange:this.inputChangeHandler}))),s.a.createElement("div",{class:"content-item parameters",style:{width:"100%"}},s.a.createElement("div",{class:"parameters-container"},s.a.createElement("div",{class:"parameters-item"},s.a.createElement("div",{class:"parameter-text parameter-item"},"Sort:")),s.a.createElement("div",{class:"dropdown-container"},s.a.createElement("div",{"data-w-id":"83c3eaae-bf1d-1928-0b11-31907b7cf3d6",id:"sort",class:"dropdown-trigger"},s.a.createElement("div",{class:"parameter-text"},e)),s.a.createElement("div",{style:{height:"0PX",display:"none"},class:"dropdown-content"},s.a.createElement("div",{"data-w-id":"3a2f1878-9d77-fb16-e68d-1dfe48353203",class:"dropdown-item",onClick:function(){return r.changeQuery({contentType:"post"})}},s.a.createElement("div",{class:"parameter-text"},"Posts")),s.a.createElement("div",{"data-w-id":"2d9b06ef-22af-1a47-a5b5-2fc05b211be4",class:"dropdown-item",onClick:function(){return r.changeQuery({contentType:"comment"})}},s.a.createElement("div",{class:"parameter-text"},"Comments")))),s.a.createElement("div",{class:"parameters-item"},s.a.createElement("div",{class:"parameter-text parameter-item"},"by:")),s.a.createElement("div",{class:"parameters-item parameters-item-dropdown"},s.a.createElement("div",{class:"dropdown-container"},s.a.createElement("div",{"data-w-id":"4534be0a-5b81-6bc3-37f7-50b03c2e0e9b",id:"by",class:"dropdown-trigger"},s.a.createElement("div",{class:"parameter-text"},t)),s.a.createElement("div",{style:{height:"0PX",display:"none"},class:"dropdown-content"},s.a.createElement("div",{"data-w-id":"4534be0a-5b81-6bc3-37f7-50b03c2e0e9f",class:"dropdown-item",onClick:function(){return r.changeQuery({sort:"hot"})}},s.a.createElement("div",{class:"parameter-text"},"Hot")),s.a.createElement("div",{"data-w-id":"eab1e4cf-2441-cd8d-fbb9-a8635a7bc9d3",class:"dropdown-item",onClick:function(){return r.changeQuery({sort:"top"})}},s.a.createElement("div",{class:"parameter-text"},"Top")),s.a.createElement("div",{"data-w-id":"4534be0a-5b81-6bc3-37f7-50b03c2e0ea2",class:"dropdown-item",onClick:function(){return r.changeQuery({sort:"new"})}},s.a.createElement("div",{class:"parameter-text"},"New")))))),s.a.createElement("div",{class:"parameters-container parameters-container-right"},s.a.createElement("div",{class:"parameters-item"},s.a.createElement("div",{class:"parameter-text parameter-item"},"From:")),s.a.createElement("div",{class:"parameters-item parameters-item-dropdown"},s.a.createElement("div",{class:"dropdown-container dropdown-container-right"},s.a.createElement("div",{"data-w-id":"4f7095d4-3b82-1424-67bc-d51c84655b1d",id:"from",class:"dropdown-trigger"},s.a.createElement("div",{class:"parameter-text"},a)),s.a.createElement("div",{class:"dropdown-content dropdown-content-right",style:{height:"0PX",display:"none"}},s.a.createElement("div",{"data-w-id":"4f7095d4-3b82-1424-67bc-d51c84655b21",class:"dropdown-item",onClick:function(){return r.changeQuery({timePeriod:"day"})}},s.a.createElement("div",{class:"parameter-text"},"Day")),s.a.createElement("div",{"data-w-id":"4f7095d4-3b82-1424-67bc-d51c84655b24",class:"dropdown-item",onClick:function(){return r.changeQuery({timePeriod:"week"})}},s.a.createElement("div",{class:"parameter-text"},"Week")),s.a.createElement("div",{"data-w-id":"4f7095d4-3b82-1424-67bc-d51c84655b24",class:"dropdown-item",onClick:function(){return r.changeQuery({timePeriod:"month"})}},s.a.createElement("div",{class:"parameter-text"},"Month")),s.a.createElement("div",{"data-w-id":"4f7095d4-3b82-1424-67bc-d51c84655b27",class:"dropdown-item",onClick:function(){return r.changeQuery({timePeriod:"all time"})}},s.a.createElement("div",{class:"parameter-text"},"All Time"))))))))}}]),t}(s.a.Component),P=a(30).default;function T(e){for(var t="",a=0;a<e.length;a++)t+=""+e.charCodeAt(a).toString(16);return t}var Q=function(e){function t(e){var a;Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).upvoteClickHandler=function(){if(a.props.user){var e="#"+a.props.data._id+"slidingView",t=a.state.upvoteButtonClicked,n="#"+a.props.data._id+"button";t?(window.$(e).animate({width:"0"},200,"linear"),window.$(n).animate({opacity:0},500,"linear"),a.setState({upvoteButtonClicked:!1})):(window.$(e).animate({width:"170"},500,"easeOutExpo"),window.$(n).animate({opacity:.15},500,"linear"),a.setState({upvoteButtonClicked:!0}))}else a.props.loginHandler()},a.upvoteHandler=function(){document.getElementById(a.props.data._id+"button").click(),a.setState({alreadyVoted:!0,voteTotal:a.state.voteTotal+=.05})};var n=!1;return e.user&&e.data.votes.includes(a.props.user.id)&&(n=!0),a.state={upvoteButtonClicked:!1,alreadyVoted:n,voteTotal:e.data.voteTotal},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.state.voteTotal.toString();console.log(this.props.data.voteTotal),"."==t[t.length-2]&&(t+="0");var a=this.props.data.username,n=this.props.user&&this.props.data.userId===this.props.user.id,r=this.props.data._id+"button",o=this.props.data._id+"slidingView",i=this.state.alreadyVoted;return this.props.user&&(i=this.state.alreadyVoted||this.props.data.votes.includes(this.props.user.id)),console.log(this.props.data),s.a.createElement("div",{class:"div-block-40"},s.a.createElement("div",{class:"content-item"},s.a.createElement("div",{class:"content-item-top"},s.a.createElement("div",{class:"div-block-8"},s.a.createElement("div",{class:"text-block-8"},"$"+t),s.a.createElement("div",{class:"text-block-9",onClick:function(){return e.props.changeQueryHandler({type:"userFeed",userId:e.props.data.userId,contentType:"post",sort:"new",timePeriod:"month"})}},a),s.a.createElement("div",{class:"text-block-6"},function(e){var t=Math.floor((new Date-e)/1e3),a=Math.floor(t/31536e3);return a>1?a+" years":(a=Math.floor(t/2592e3))>1?a+" months":(a=Math.floor(t/86400))>1?a+" days":(a=Math.floor(t/3600))>1?a+" hours":(a=Math.floor(t/60))>1?a+" minutes":Math.floor(t)+" seconds"}(1e3*this.props.data.timestamp)+" ago")),s.a.createElement("div",{class:"content-item-content content-item-content-comment"},s.a.createElement("div",{class:"text-block-24"},"in reply to ",s.a.createElement("strong",{class:"bold-text-5",onClick:function(){return e.props.changeQueryHandler({type:"post",post:e.props.data.rootPost.txid})}},this.props.data.rootPost.title)),s.a.createElement("div",{class:"comment-content"},this.props.data.comment))),s.a.createElement("div",{class:"div-block-10"},s.a.createElement("div",{class:"div-block-11"},n?null:s.a.createElement("div",{class:"action-bar-button"},s.a.createElement("div",{class:"post-action"},i?"\ud83d\uddf3\ufe0f\u2714\ufe0f":"Upvote")),s.a.createElement("div",{class:"action-bar-button",onClick:function(){return e.props.replyHandler(e.props.data)}},s.a.createElement("div",{class:"post-action"},"Reply")),s.a.createElement("div",{class:"action-bar-button",onClick:function(){return e.props.changeQueryHandler({type:"post",post:e.props.data.rootPost.txid})}},s.a.createElement("div",{class:"post-action"},"Show Thread"))))),n?null:s.a.createElement("div",{style:{backgroundColor:"black",opacity:0},onClick:this.state.alreadyVoted?null:this.upvoteClickHandler,id:r,class:"div-block-44"}),s.a.createElement("div",{style:{width:"0PX"},id:o,class:"div-block-41"},s.a.createElement("div",{class:"div-block-42"},s.a.createElement("div",{class:"div-block-43"},this.props.user?s.a.createElement(P,{label:"upvote",onPayment:this.upvoteHandler,outputs:[{amount:0,currency:"BSV",type:"SCRIPT",script:"OP_RETURN "+T("13beK8bifnhuC8pawWvMrPCaWoTQi5LnZf")+" "+T("post/vote")+" "+T("vote")+" "+T(this.props.data._id)+" "+T(this.props.user.id)},{to:this.props.data.transaction.in[0].e.a,amount:"0.05",currency:"USD"}]}):null))))}}]),t}(s.a.Component),B=(a(2),function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(s)))).sendMessageHandler=function(){if(a.props.user){a.props.postDiscussionMessage(document.getElementById("name").value);var e=encodeURIComponent(document.getElementById("name").value),t=btoa(JSON.stringify({type:"postDiscussion",message:e,username:a.props.user.username}));fetch("https://www.bsvnews.today/q/"+t),document.getElementById("name").value=""}else a.props.loginHandler()},a.returnKeyHandler=function(e){13==e.keyCode&&a.sendMessageHandler()},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;document.getElementById("name").onkeypress=function(t){return e.returnKeyHandler(t)}}},{key:"render",value:function(){var e=this.props.data,t=[];if(e)for(var a=0;a<e.length;a++)if("discussion"!=e[a].type)t.push(s.a.createElement(R,{data:e[a],changeQueryHandler:this.props.changeQueryHandler}));else{var n,r=e[a];if(this.props.user&&r.username==this.props.user.username)t.push(s.a.createElement(N,{data:r.message})),(n=e[a+1])&&"discussion"==n.type?this.props.user&&n.username!=this.props.user.username&&t.push(s.a.createElement(_,{data:this.props.user.username})):t.push(s.a.createElement(_,{data:this.props.user.username}));else t.push(s.a.createElement(I,{data:r.message})),(n=e[a+1])&&"discussion"==n.type?n.username!=r.username&&t.push(s.a.createElement(M,{data:r.username})):t.push(s.a.createElement(M,{data:r.username}))}return s.a.createElement("div",{"data-w-id":"a59d307d-9930-6dfd-5525-555df24d9f6e",style:{display:"none"},class:"div-block-13"},s.a.createElement("div",{class:"div-block-17"},s.a.createElement("div",{class:"div-block-16"},t)),s.a.createElement("div",{class:"div-block-14"},s.a.createElement("div",{class:"form-block-2 w-form"},s.a.createElement("form",{id:"email-form",name:"email-form","data-name":"Email Form"},s.a.createElement("input",{autoComplete:"off",type:"text",class:"text-field-2 w-input",maxlength:"256",name:"name","data-name":"Name",id:"name"}))),s.a.createElement("div",{class:"div-block-35",onClick:this.sendMessageHandler},s.a.createElement("div",{class:"text-block-22"},"\u2191"))))}}]),t}(s.a.Component)),I=function(e){return s.a.createElement("div",{class:"discussion-post"},s.a.createElement("div",{class:"text-block-12"},e.data))},N=function(e){return s.a.createElement("div",{class:"discussion-post discussion-post-right"},s.a.createElement("div",{class:"text-block-12"},e.data))},M=function(e){return s.a.createElement("div",null,s.a.createElement("div",{class:"discussion-user"},e.data))},_=function(e){return s.a.createElement("div",{class:"discussion-user discussion-user-right"},e.data)},R=function(e){var t,a,n,r,o="vote"==e.data.type,i="comment"==e.data.type,c=!o&&!i;return o?(a="Someone",t=e.data.votedOnTitle,n="voted on",r=e.data.votedOn):i?(a=e.data.username,t=e.data.rootPost.title,n="commented on",r=e.data.rootPost.txid):c&&(a=e.data.username,t=e.data.title,n="posted",r=e.data._id),t?s.a.createElement("div",{class:"discussion-notification"},s.a.createElement("strong",{class:"bold-text-4",onClick:function(){e.changeQueryHandler({type:"userFeed",userId:e.data.userId,contentType:"post",sort:"new",timePeriod:"month"}),window.$(window).width()<768&&document.getElementById("close-discussion").click()}},a)," ",n," ",s.a.createElement("strong",{class:"bold-text-3",onClick:function(){e.changeQueryHandler({type:"post",post:r}),window.$(window).width()<768&&document.getElementById("close-discussion").click()}},t)):null},V=a(30).default;function q(e){for(var t="",a=0;a<e.length;a++)t+=""+e.charCodeAt(a).toString(16);return t}var J=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).closeAlert=function(){a.props.cancelReplyHandler(),a.setState({title:"",url:"",comment:""})},a.onPaymentHandler=function(){document.getElementsByClassName("div-block-34")[0].click(),a.closeAlert()},a.state={title:"",url:"",comment:""},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e,t=this,a=" ",n=this.props.replyingTo;this.props.user&&!n?a=q("13beK8bifnhuC8pawWvMrPCaWoTQi5LnZf")+" "+q("post/vote")+" "+q("post")+" "+q(encodeURIComponent(this.state.title))+" "+q(encodeURI(this.state.url))+" "+q(this.props.user.username)+" "+q(this.props.user.id):this.props.user&&n&&(a=q("13beK8bifnhuC8pawWvMrPCaWoTQi5LnZf")+" "+q("comment")+" "+q(this.props.replyingTo._id)+" "+q(encodeURIComponent(this.state.comment))+" "+q(this.props.user.username)+" "+q(this.props.user.id)),n&&(e=n.username);var r=s.a.createElement("div",{"data-w-id":"20261b05-15ea-fd10-4303-6a6538f195e4",class:"alert"},s.a.createElement("div",{class:"alert-title"},s.a.createElement("div",{class:"text-block-15"},"Submit a Link"),s.a.createElement("div",{"data-w-id":"c6b664e1-a7b1-959c-8ad1-97eaa9a9d996",onClick:this.closeAlert,class:"div-block-29"},s.a.createElement("div",{class:"text-block-16"},"X"))),s.a.createElement("div",{class:"form-block-3 w-form"},s.a.createElement("form",{id:"email-form-2",name:"email-form-2","data-name":"Email Form 2",class:"form-2"},s.a.createElement("label",{for:"node",class:"field-label"},"Write a title"),s.a.createElement("input",{onChange:function(){return t.setState({title:document.getElementById("node").value})},value:this.state.title,type:"text",maxlength:"256",id:"node",class:"text-field-3 w-input"}),s.a.createElement("label",{for:"node-2",class:"field-label-2"},"URL"),s.a.createElement("input",{type:"email",maxlength:"256",id:"node-2",class:"text-field-3 w-input",value:this.state.url,onChange:function(){return t.setState({url:document.getElementById("node-2").value})}}))),s.a.createElement("div",{class:"div-block-30"},s.a.createElement("div",{class:"div-block-34","data-w-id":"f78f9773-81a0-c31c-0a36-98ed96251b27",style:{width:0,height:0}}),s.a.createElement("div",{class:"submit-mb-container"},s.a.createElement(V,{onPayment:this.onPaymentHandler,outputs:[{amount:0,currency:"BSV",type:"SCRIPT",script:"OP_RETURN "+a}],label:"Post"})))),o=s.a.createElement("div",{"data-w-id":"20261b05-15ea-fd10-4303-6a6538f195e4",class:"alert"},s.a.createElement("div",{class:"alert-title"},s.a.createElement("div",{class:"text-block-15"},"Comment"),s.a.createElement("div",{"data-w-id":"85e8fe7e-fd06-e878-870a-8f8994664ecb",onClick:this.closeAlert,class:"div-block-29"},s.a.createElement("div",{class:"text-block-16"},"X"))),s.a.createElement("div",{class:"form-block-3 w-form"},s.a.createElement("form",{id:"email-form-2",name:"email-form-2","data-name":"Email Form 2",class:"form-2"},s.a.createElement("label",{for:"node-3",class:"field-label-3"},"Responding to ",s.a.createElement("strong",null,e)),s.a.createElement("textarea",{value:this.state.comment,onChange:function(){return t.setState({comment:document.getElementById("field").value})},name:"field",maxlength:"5000",id:"field",class:"text-field-3 comment-field w-input"}))),s.a.createElement("div",{class:"div-block-30"},s.a.createElement("div",{"data-w-id":"f78f9773-81a0-c31c-0a36-98ed96251b27",class:"div-block-34",style:{width:0,height:0}}),s.a.createElement("div",{class:"submit-mb-container",style:{width:140}},s.a.createElement(V,{onPayment:this.onPaymentHandler,outputs:[{amount:0,currency:"BSV",type:"SCRIPT",script:"OP_RETURN "+a}],label:"Reply"}))));return s.a.createElement("div",null,s.a.createElement("div",{"data-w-id":"45990265-012f-9c0a-8be9-a3e6027aab5b",style:{display:"none",opacity:"0"},class:"div-block-24"}),s.a.createElement("div",{"data-w-id":"b374f5a9-da8a-caa3-6b31-5447c2256b80",style:{display:"none"},class:"div-block-25"},n?o:r))}}]),t}(s.a.Component),L=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(s)))).runAnimationScripts=function(){var e=document.createElement("script");e.src="https://bico.media/f214f48a0f5010efe27e0e4cbc1840af2bc94aae3c695847f8b64c6afa3b5686.js",document.body.appendChild(e)},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidUpdate",value:function(){}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return this.props.data}}]),t}(s.a.Component),D=a(106),U=a(61).MoneyButtonClient,W=function(e){function t(e){var a;Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).reload=function(){console.log("reload"),a.startNotificationSocket(),a.changeQueryHandler(JSON.parse(a.state.latestQuery))},a.startNotificationSocket=function(){t&&t.close();var e=btoa(JSON.stringify({v:3,q:{find:{"out.s1":"13beK8bifnhuC8pawWvMrPCaWoTQi5LnZf"}}})),t=new EventSource("https://genesis.bitdb.network/s/1FnauZ9aUH2Bex6JzdcV4eNX7oLSSEbxtN/"+e);t.onmessage=function(e){var t=JSON.parse(JSON.stringify(JSON.parse(e.data),null,2)).data;console.log(t);var n=!0,s=!1,r=void 0;try{for(var o,i=t[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var c=o.value;if(console.log(c),"discussion"==c.out[0].s2){var l=a.state.response[1].slice();a.state.user?a.state.user.username!=c.out[0].s4&&l.push({type:"discussion",_id:c.tx.h,message:decodeURIComponent(c.out[0].s3),username:c.out[0].s4}):l.push({type:"discussion",_id:c.tx.h,message:decodeURIComponent(c.out[0].s3),username:c.out[0].s4}),a.setState({response:[a.state.response[0],l,a.state.response[2]]})}else{var d=a.state.latestQuery,u={type:"update",latestTxid:c.tx.h,query:JSON.parse(a.state.latestQuery)},m=btoa(JSON.stringify(u));fetch("https://www.bsvnews.today/q/"+m).then((function(e){return e.json()})).then((function(e){var t=JSON.stringify(e,null,2);t=JSON.parse(t),d==a.state.latestQuery&&a.setState({response:t})}))}}}catch(p){s=!0,r=p}finally{try{n||null==i.return||i.return()}finally{if(s)throw r}}}},a.postDiscussionMessage=function(e){var t={type:"discussion",message:e,username:a.state.user.username},n=a.state.response[1].slice();n.push(t),a.setState({response:[a.state.response[0],n,a.state.response[2]]})},a.onScrollEnd=function(e){var t=document.getElementById("content-container");t.offsetHeight+t.scrollTop>=t.scrollHeight&&a.setState({numContentItems:a.state.numContentItems+25})},a.setScrollEventListener=function(){document.getElementById("content-container").addEventListener("scroll",a.onScrollEnd)},a.fetchData=function(){var e=Object(l.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(l.a)(c.a.mark((function e(a){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=btoa(JSON.stringify(t)),fetch("https://www.bsvnews.today/q/"+n).then((function(e){return e.json()})).then((function(e){var t=JSON.stringify(e,null,2);t=JSON.parse(t),a(t)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.changeQueryHandler=function(){var e=Object(l.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({latestQuery:JSON.stringify(t)}),e.next=3,a.fetchData(t);case 3:n=e.sent,a.state.latestQuery==JSON.stringify(t)&&a.setState({query:t,response:n,numContentItems:10});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.replyHandler=function(e){a.state.user?(a.setState({replyingTo:e}),document.getElementById("composeButton").click()):a.loginHandler()},a.cancelReplyHandler=function(){setTimeout((function(){a.setState({replyingTo:null})}),500)},a.loginHandler=function(){new U("c718a0b5fd8f38f4610ae5e1bf277d97").requestAuthorization("auth.user_identity:read users.profiles:read","https://www.bsvnews.today")};var n={type:"feed",contentType:"post",sort:"top",timePeriod:"week"},s=JSON.parse(localStorage.getItem("user"));if(new URLSearchParams(window.location.search).has("code")){var r=new U("c718a0b5fd8f38f4610ae5e1bf277d97");r.handleAuthorizationResponse().then((function(){r.getIdentity().then((function(e){r.getUserProfile(e.id).then((function(e){var t=(s=e).primaryPaymail.search("@");s.username=s.primaryPaymail.substring(0,t),a.setState({user:s}),localStorage.setItem("user",JSON.stringify(e)),window.history.pushState({id:"homepage"},"BSV NEWS","https://www.bsvnews.today")}))}))}))}a.state={query:n,latestQuery:JSON.stringify(n),response:[],scriptsLoaded:!1,fontScriptsLoaded:!1,user:s,replyingTo:null,numContentItems:10};var o,i,u=btoa(JSON.stringify(a.state.query));return fetch("https://www.bsvnews.today/q/"+u).then((function(e){return e.json()})).then((function(e){var t=JSON.stringify(e,null,2);t=JSON.parse(t),a.setState({response:t},(function(){a.setScrollEventListener(),a.startNotificationSocket()}))})),window.app=Object(v.a)(a),"undefined"!==typeof document.hidden?(o="hidden",i="visibilitychange"):"undefined"!==typeof document.msHidden?(o="msHidden",i="msvisibilitychange"):"undefined"!==typeof document.webkitHidden&&(o="webkitHidden",i="webkitvisibilitychange"),"undefined"===typeof document.addEventListener||void 0===o?console.log("This demo requires a browser, such as Google Chrome or Firefox, that supports the Page Visibility API."):document.addEventListener(i,(function(){document[o]||window.app.reload()}),!1),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;document.documentElement.setAttribute("data-wf-page","5d5c432099f8055a71480feb"),document.documentElement.setAttribute("data-wf-site","5d5c1eff40c6bef7ea85f7d4"),H()("https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.4.1.min.220afd743d.js",(function(){return H()("https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.3/jquery.easing.min.js",(function(){return H()("https://bico.media/bfbad1409a5c301ddaf3ea7da214d7d2f14bf7351f4980e610c6ed47703a29b7.js",(function(){return e.setState({scriptsLoaded:!0})}))}))}))}},{key:"componentWillMount",value:function(){var e=this;H()("https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js",(function(){return H()("https://bico.media/ad5d292aade21e9aea6074d1a0cdaa8cc44b96feff80afc35aa2bdca5a3fc8c0",(function(){return e.setState({fontScriptsLoaded:!0})}))}))}},{key:"render",value:function(){var e=this,t=JSON.stringify(this.state.query)!=this.state.latestQuery||!this.state.scriptsLoaded||0==this.state.response.length,a="userFeed"==this.state.query.type&&this.state.response[2]&&"userFeed"==JSON.parse(this.state.latestQuery).type&&!t,n="post"==this.state.query.contentType||"post"==this.state.query.type,r="comment"==this.state.query.contentType,o="post"!=JSON.parse(this.state.latestQuery).type,i="post"===this.state.query.type,c=0,l=[];if(n&&this.state.response[0]){var d=!0,u=!1,m=void 0;try{for(var p,v=this.state.response[0][Symbol.iterator]();!(d=(p=v.next()).done);d=!0){var h=p.value;c<this.state.numContentItems&&(l.push(s.a.createElement(w,{loginHandler:this.loginHandler,changeQueryHandler:this.changeQueryHandler,key:h._id,data:h,postView:i,user:this.state.user,replyHandler:this.replyHandler})),c++)}}catch(T){u=!0,m=T}finally{try{d||null==v.return||v.return()}finally{if(u)throw m}}}var f,b=[];if(r&&this.state.response[0]){var y=!0,E=!1,g=void 0;try{for(var S,O=this.state.response[0][Symbol.iterator]();!(y=(S=O.next()).done);y=!0){var H=S.value;c<this.state.numContentItems&&(b.push(s.a.createElement(Q,{loginHandler:this.loginHandler,changeQueryHandler:this.changeQueryHandler,key:H._id,data:H,user:this.state.user,replyHandler:this.replyHandler})),c++)}}catch(T){E=!0,g=T}finally{try{y||null==O.return||O.return()}finally{if(E)throw g}}}f=n?l:b;var x=!t&&this.state.response[0],P=s.a.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"center"}},s.a.createElement("img",{style:{width:"40px",height:"40px"},src:"https://guerillascience.org/wp-content/plugins/bbpowerpack/images/spinner.gif"})," ");return s.a.createElement("div",{className:"body-2",style:this.state.fontScriptsLoaded?null:{opacity:0}},s.a.createElement(D.Helmet,null,s.a.createElement("meta",{charset:"utf-8"}),s.a.createElement("title",null,"BSV NEWS"),s.a.createElement("meta",{content:"width=device-width, initial-scale=1, maximum-scale=1,user-scalable=0",name:"viewport"}),s.a.createElement("meta",{content:"Webflow",name:"generator"})),s.a.createElement(k,{changeQueryHandler:this.changeQueryHandler,user:this.state.user,loginHandler:this.loginHandler}),s.a.createElement("div",{"data-w-id":"4af52811-6307-f07a-1959-d21bcda05f48",onClick:function(){setTimeout((function(){document.getElementsByClassName("div-block-17")[0].scrollTop=document.getElementsByClassName("div-block-17")[0].scrollHeight}),20)},class:"div-block-18"},s.a.createElement("img",{src:"https://bico.media/517a09f903abb8f3e723c77ca5053aa16235bbdec8760753a0837c85a4cfe521",alt:"",class:"image"})),s.a.createElement("div",{"data-w-id":"52640f80-a281-b7ac-c786-0bca7acd6636",class:"div-block-4"},s.a.createElement("div",{class:"div-block-15 smooth-scrolling",id:"content-container"},s.a.createElement("div",{class:"div-block-5",style:{width:"100%"}},a?s.a.createElement(C,{data:this.state.response[2]}):null,s.a.createElement("div",{style:o?null:{display:"none"}},s.a.createElement(j,{latestQuery:this.state.latestQuery,query:JSON.parse(this.state.latestQuery),changeSortAndFilter:this.changeQueryHandler})),x?s.a.createElement(L,{data:f}):null,t?P:null)),s.a.createElement("div",{class:"div-block-19"},s.a.createElement("div",{"data-w-id":"4a1870aa-ff99-fbd6-0ef7-9e766b2be4be",onClick:this.state.user?null:function(){return e.loginHandler()},id:"composeButton",class:"div-block-20"},s.a.createElement("div",{class:"text-block-13"},"+")))),s.a.createElement(B,{loginHandler:this.loginHandler,postDiscussionMessage:this.postDiscussionMessage,data:this.state.response[1],changeQueryHandler:this.changeQueryHandler,user:this.state.user}),s.a.createElement(J,{user:this.state.user,replyingTo:this.state.replyingTo,cancelReplyHandler:this.cancelReplyHandler}),"}")}}]),t}(s.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(s.a.createElement(W,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[107,1,2]]]);
//# sourceMappingURL=main.3a0db27d.chunk.js.map