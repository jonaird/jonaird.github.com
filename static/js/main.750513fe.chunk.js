(window.webpackJsonpbsvnewsv3=window.webpackJsonpbsvnewsv3||[]).push([[0],{107:function(e,t,a){e.exports=a(260)},112:function(e,t,a){},114:function(e,t,a){},260:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(101),o=a.n(s),i=(a(112),a(1)),c=a.n(i),l=a(3),d=a(4),u=a(5),m=a(8),p=a(7),v=a(13),h=a(9),b=(a(114),a(30).default);var f=function(e){function t(e){var a;Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).upvoteClickHandler=function(){if(a.props.user){console.log("click");var e="#"+a.props.data._id+"slidingView",t=a.state.upvoteButtonClicked,n="#"+a.props.data._id+"button";t?(window.$(e).animate({width:"0"},200,"linear"),window.$(n).animate({opacity:0},500,"linear"),a.setState({upvoteButtonClicked:!1})):(window.$(e).animate({width:"170"},500,"easeOutExpo"),window.$(n).animate({opacity:.15},500,"linear"),a.setState({upvoteButtonClicked:!0}))}else a.props.loginHandler()},a.upvoteHandler=function(){document.getElementById(a.props.data._id+"button").click(),a.setState({alreadyVoted:!0,voteTotal:a.state.voteTotal+=.05})};var n=!1;return e.user&&e.data.votes.includes(a.props.user.id)&&(n=!0),a.state={upvoteButtonClicked:!1,alreadyVoted:n,voteTotal:e.data.voteTotal},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,a=this.state.voteTotal.toString();"."==a[a.length-2]&&(a+="0");var n=this.props.data.username,s=this.props.data.comment,o=[],i=this.props.user&&this.props.data.userId===this.props.user.id,c=this.props.data._id+"button",l=this.props.data._id+"slidingView",d=this.state.alreadyVoted;this.props.user&&(d=this.state.alreadyVoted||this.props.data.votes.includes(this.props.user.id));var u=!0,m=!1,p=void 0;try{for(var v,h=this.props.data.comments[Symbol.iterator]();!(u=(v=h.next()).done);u=!0){var f=v.value;o.push(r.a.createElement(t,{loginHandler:this.props.loginHandler,user:this.props.user,changeQueryHandler:this.props.changeQueryHandler,replyHandler:this.props.replyHandler,data:f,key:f._id}))}}catch(y){m=!0,p=y}finally{try{u||null==h.return||h.return()}finally{if(m)throw p}}return r.a.createElement("div",{style:{}},r.a.createElement("div",{class:"div-block-40"},r.a.createElement("div",{class:"content-item"},r.a.createElement("div",{class:"content-item-top content-item-top-comment"},r.a.createElement("div",{class:"div-block-8"},r.a.createElement("div",{class:"text-block-8"},"$",a),r.a.createElement("div",{class:"text-block-9",onClick:function(){return e.props.changeQueryHandler({type:"userFeed",userId:e.props.data.userId,contentType:"post",sort:"new",timePeriod:"all time"})}},n),r.a.createElement("div",{class:"text-block-6"},function(e){var t=Math.floor((new Date-e)/1e3),a=Math.floor(t/31536e3);return a>1?a+" years":(a=Math.floor(t/2592e3))>1?a+" months":(a=Math.floor(t/86400))>1?a+" days":(a=Math.floor(t/3600))>1?a+" hours":(a=Math.floor(t/60))>1?a+" minutes":Math.floor(t)+" seconds"}(1e3*this.props.data.timestamp)," ago")),r.a.createElement("div",{class:"content-item-content content-item-content-post-view-comment"},r.a.createElement("div",{class:"content-comment-post-view"},s),r.a.createElement("div",{class:"div-block-10 action-bar-comment"},r.a.createElement("div",{class:"div-block-11"},i?null:r.a.createElement("div",{class:"action-bar-button action-bar-button-comment action-bar-button-comment-left"},r.a.createElement("div",{class:"post-action"},d?"\ud83d\uddf3\ufe0f\u2714\ufe0f":"Upvote")),r.a.createElement("div",{class:i?"action-bar-button action-bar-button-comment action-bar-button-comment-left":"action-bar-button action-bar-button-comment",onClick:function(){return e.props.replyHandler(e.props.data)}},r.a.createElement("div",{class:"post-action"},"Reply"))))))),i?null:r.a.createElement("div",{style:{backgroundColor:"black",opacity:0,marginLeft:90},onClick:this.state.alreadyVoted?null:this.upvoteClickHandler,id:c,class:"div-block-44"}),r.a.createElement("div",{style:{width:"0PX"},id:l,class:"div-block-41"},r.a.createElement("div",{class:"div-block-42"},r.a.createElement("div",{class:"div-block-43"},this.props.user?r.a.createElement(b,{label:"upvote",onPayment:this.upvoteHandler,to:"112",amount:"0.05",currency:"USD"}):null)))),r.a.createElement("div",{style:{paddingLeft:40}},o))}}]),t}(r.a.Component),y=a(30).default;function E(e){for(var t="",a=0;a<e.length;a++)t+=""+e.charCodeAt(a).toString(16);return t}var g=function(e){function t(e){var a;Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).upvoteClickHandler=function(){if(a.props.user){var e="#"+a.props.data._id+"slidingView",t=a.state.upvoteButtonClicked,n="#"+a.props.data._id+"button";t?(window.$(e).animate({width:"0"},200,"linear"),window.$(n).animate({opacity:0},500,"linear"),a.setState({upvoteButtonClicked:!1})):(window.$(e).animate({width:"170"},500,"easeOutExpo"),window.$(n).animate({opacity:.15},500,"linear"),a.setState({upvoteButtonClicked:!0}))}else a.props.loginHandler()},a.upvoteHandler=function(){document.getElementById(a.props.data._id+"button").click(),a.setState({alreadyVoted:!0,voteTotal:a.state.voteTotal+=.05})};var n=!1;return e.user&&e.data.votes.includes(e.user.id)&&(n=!0),a.state={upvoteButtonClicked:!1,alreadyVoted:n,voteTotal:e.data.voteTotal},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.props.data._id,this.props.data._id,this.state.upvoteButtonClicked}},{key:"render",value:function(){var e=this,t=this.state.voteTotal.toString();"."==t[t.length-2]&&(t+="0");var a=this.props.data.username,n=this.props.data.title,s=this.props.data.description,o=this.props.data.numberOfComments,i=this.props.data._id+"button",c=this.props.data._id+"slidingView",l=this.props.postView,d=[],u=this.state.alreadyVoted;this.props.user&&(u=this.state.alreadyVoted||this.props.data.votes.includes(this.props.user.id));var m=this.props.user&&this.props.data.userId===this.props.user.id;o=null;if(l||(o=r.a.createElement("div",{class:"action-bar-button action-bar-button-right",onClick:function(){return e.props.changeQueryHandler({type:"post",post:e.props.data._id})}},r.a.createElement("div",{class:"post-action"},this.props.data.numberOfComments+" comments"))),l){var p=!0,v=!1,h=void 0;try{for(var b,g=this.props.data.comments[Symbol.iterator]();!(p=(b=g.next()).done);p=!0){var w=b.value;d.push(r.a.createElement(f,{loginHandler:this.props.loginHandler,user:this.props.user,changeQueryHandler:this.props.changeQueryHandler,replyHandler:this.props.replyHandler,data:w}))}}catch(k){v=!0,h=k}finally{try{p||null==g.return||g.return()}finally{if(v)throw h}}}return r.a.createElement("div",null,r.a.createElement("div",{class:"div-block-40"},r.a.createElement("div",{class:"content-item"},r.a.createElement("div",{class:"content-item-top"},r.a.createElement("div",{class:"div-block-8"},r.a.createElement("div",{class:"text-block-8"},"$"+t),r.a.createElement("div",{class:"text-block-9",onClick:function(){return e.props.changeQueryHandler({type:"userFeed",userId:e.props.data.userId,contentType:"post",sort:"new",timePeriod:"all time"})}},a),r.a.createElement("div",{class:"text-block-6"},function(e){var t=Math.floor((new Date-e)/1e3),a=Math.floor(t/31536e3);return a>1?a+" years":(a=Math.floor(t/2592e3))>1?a+" months":(a=Math.floor(t/86400))>1?a+" days":(a=Math.floor(t/3600))>1?a+" hours":(a=Math.floor(t/60))>1?a+" minutes":Math.floor(t)+" seconds"}(1e3*this.props.data.timestamp)+" ago")),r.a.createElement("div",{class:"content-item-content"},r.a.createElement("div",null,r.a.createElement("strong",{class:"post-title",onClick:function(){return window.open(e.props.data.url,"_blank")}},n)),r.a.createElement("div",{class:"post-description"},s))),r.a.createElement("div",{class:"div-block-10"},r.a.createElement("div",{class:"div-block-11"},m?null:r.a.createElement("div",{class:"action-bar-button"},r.a.createElement("div",{class:"post-action"},u?"\ud83d\uddf3\ufe0f\u2714\ufe0f":"Upvote")),r.a.createElement("div",{class:"action-bar-button",onClick:function(){return e.props.replyHandler(e.props.data)}},r.a.createElement("div",{class:"post-action"},"Reply")),o))),m?null:r.a.createElement("div",{style:{backgroundColor:"black",opacity:0},onClick:u?null:this.upvoteClickHandler,id:i,class:"div-block-44"}),r.a.createElement("div",{style:{width:"0PX"},id:c,class:"div-block-41"},r.a.createElement("div",{class:"div-block-42"},r.a.createElement("div",{class:"div-block-43"},!this.props.user||m||u?null:r.a.createElement(y,{label:"upvote",onPayment:this.upvoteHandler,outputs:[{amount:0,currency:"BSV",type:"SCRIPT",script:"OP_RETURN "+E("13beK8bifnhuC8pawWvMrPCaWoTQi5LnZf")+" "+E("post/vote")+" "+E("vote")+" "+E(this.props.data._id)+" "+E(this.props.user.id)},{to:this.props.data.transaction.in[0].e.a,amount:"0.05",currency:"USD"}]}),r.a.createElement("div",{id:"my-money-button"}))))),r.a.createElement("div",{style:{paddingLeft:40}},d))}}]),t}(r.a.Component),w=(a(61).MoneyButtonClient,function(e){return r.a.createElement("div",{class:"bsvnews-bar nav-bar"},r.a.createElement("div",{class:"bar-left"},r.a.createElement("div",{class:"bar-item bar-item-left",onClick:function(){return e.changeQueryHandler({type:"feed",contentType:"post",sort:"top",timePeriod:"week"})}},r.a.createElement("div",{class:"text-block"},"BSV NEWS"))),r.a.createElement("div",{class:"bar-right"},r.a.createElement("div",{"data-w-id":"bfd75da2-a558-1d42-930b-2d1c229e9153",class:"bar-item bar-item-right bar-item-vertical"},r.a.createElement("div",{class:"div-block-2"},r.a.createElement("div",{class:"text-block-3"}," Reward Pool:",r.a.createElement("br",null))),r.a.createElement("div",{class:"text-block-4"},"$25")),r.a.createElement("div",{"data-w-id":"a208a93f-16ae-9a9a-5d0b-dc012b7a4a6d",class:"bar-item bar-item-right boost-button"},r.a.createElement("div",{class:"cta-button"},r.a.createElement("div",{"white-space":"nowrap",class:"text-block-5"},"Boost"))),r.a.createElement("div",{"data-w-id":"a1a6d7e7-53fb-49c3-4671-745f2b7ac08b",onClick:function(){setTimeout((function(){document.getElementsByClassName("div-block-17")[0].scrollTop=document.getElementsByClassName("div-block-17")[0].scrollHeight}),20)},class:"bar-item bar-item-right chat-button bar-item-chat-button"},r.a.createElement("img",{src:"https://bico.media/517a09f903abb8f3e723c77ca5053aa16235bbdec8760753a0837c85a4cfe521",alt:""})),r.a.createElement("div",{"data-w-id":"b210fbe5-474f-7680-84c9-3c03a7f46447",class:"bar-item bar-item-right menu-button"},r.a.createElement("div",{class:"div-block-21"},r.a.createElement("img",{src:"https://bico.media/28de6e88249bd34f7ddd9df986c5a330a1804bd3b1fad5059544c7990f809830",alt:""})),r.a.createElement("div",{class:"div-block-22"}),r.a.createElement("div",{"data-w-id":"e7b8d81a-166b-7bb5-40c3-0b8d93e8a08c",style:{display:"none",height:"0PX"},class:"div-block-22"},e.user?r.a.createElement("div",{style:{cursor:"pointer"},onClick:function(){return e.changeQueryHandler({type:"userFeed",userId:e.user.id,contentType:"post",timePeriod:"all time"})},"data-w-id":"e7b8d81a-166b-7bb5-40c3-0b8d93e8a08d",class:"div-block-23"},r.a.createElement("div",{class:"text-block-14"},"Profile")):null,r.a.createElement("div",{"data-w-id":"b0f6535a-fe81-b57b-bf2e-c1e186875e2a",style:{cursor:"pointer"},class:"div-block-23",onClick:function(){e.user?(localStorage.clear(),window.location.reload()):e.loginHandler()}},r.a.createElement("div",{class:"text-block-14"},e.user?"Logout":"Login"," ")))),r.a.createElement("div",{"data-w-id":"73708752-5d81-4803-bd56-9bf062f332a6",style:{display:"none"},class:"bar-item bar-item-right bar-item-right-discussion-close"},r.a.createElement("div",{class:"username"},"X"))))}),k=function(e){var t=e.data.amountEarned.toString();return"."==t[t.length-2]&&(t+="0"),r.a.createElement("div",{class:"content-item content-item-profile"},r.a.createElement("div",{class:"div-block-31"},r.a.createElement("div",{class:"text-block-17"},e.data.username),r.a.createElement("div",{class:"div-block-32"},r.a.createElement("div",{class:"profile-stat"},r.a.createElement("div",{class:"text-block-19"},"Posts"),r.a.createElement("div",{class:"text-block-18"},e.data.numPosts)),r.a.createElement("div",{class:"profile-stat"},r.a.createElement("div",{class:"text-block-19"},"Comments"),r.a.createElement("div",{class:"text-block-18"},e.data.numComments)),r.a.createElement("div",{class:"profile-stat profile-stat-right"},r.a.createElement("div",{class:"text-block-19"},"Votes"),r.a.createElement("div",{class:"text-block-18"},e.data.numVotes)))),r.a.createElement("div",{class:"div-block-33"},r.a.createElement("div",{class:"text-block-20"},"Earned"),r.a.createElement("div",{class:"text-block-21"},"$"+t)))},C=a(105),S=a(17),H=a.n(S);function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var x=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).changeQuery=function(e){var t=e.contentType,n=e.sort,r=e.timePeriod;t?document.getElementById("sort").click():n?document.getElementById("by").click():r&&document.getElementById("from").click();var s=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(a,!0).forEach((function(t){Object(C.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},a.props.query,{},e);a.setState({query:s}),a.props.changeSortAndFilter(s)},a.inputChangeHandler=function(){a.changeQuery({search:document.getElementById("name-3").value})},a.state={query:a.props.query},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e,t,a,n=this;switch(e="comment"==this.props.query.contentType?"Comments":"Posts",t="top"==this.props.query.sort?"Top":"new"==this.props.query.sort?"New":"Hot",this.props.query.timePeriod){case"day":a="Day";break;case"week":a="Week";break;case"month":a="Month";break;case"all time":a="All Time"}return r.a.createElement("div",{style:{width:"100%"}},r.a.createElement("div",{class:"w-form"},r.a.createElement("form",{id:"email-form-3",name:"email-form-3","data-name":"Email Form 3"},r.a.createElement("input",{type:"text",class:"text-field-5 w-input",maxlength:"256",name:"name-3","data-name":"Name 3",placeholder:"Search",id:"name-3",onChange:this.inputChangeHandler})),r.a.createElement("div",{class:"w-form-done"},r.a.createElement("div",null,"Thank you! Your submission has been received!")),r.a.createElement("div",{class:"w-form-fail"},r.a.createElement("div",null,"Oops! Something went wrong while submitting the form."))),r.a.createElement("div",{class:"content-item parameters",style:{width:"100%"}},r.a.createElement("div",{class:"parameters-container"},r.a.createElement("div",{class:"parameters-item"},r.a.createElement("div",{class:"parameter-text parameter-item"},"Sort:")),r.a.createElement("div",{class:"dropdown-container"},r.a.createElement("div",{"data-w-id":"83c3eaae-bf1d-1928-0b11-31907b7cf3d6",id:"sort",class:"dropdown-trigger"},r.a.createElement("div",{class:"parameter-text"},e)),r.a.createElement("div",{style:{height:"0PX",display:"none"},class:"dropdown-content"},r.a.createElement("div",{"data-w-id":"3a2f1878-9d77-fb16-e68d-1dfe48353203",class:"dropdown-item",onClick:function(){return n.changeQuery({contentType:"post"})}},r.a.createElement("div",{class:"parameter-text"},"Posts")),r.a.createElement("div",{"data-w-id":"2d9b06ef-22af-1a47-a5b5-2fc05b211be4",class:"dropdown-item",onClick:function(){return n.changeQuery({contentType:"comment"})}},r.a.createElement("div",{class:"parameter-text"},"Comments")))),r.a.createElement("div",{class:"parameters-item"},r.a.createElement("div",{class:"parameter-text parameter-item"},"by:")),r.a.createElement("div",{class:"parameters-item parameters-item-dropdown"},r.a.createElement("div",{class:"dropdown-container"},r.a.createElement("div",{"data-w-id":"4534be0a-5b81-6bc3-37f7-50b03c2e0e9b",id:"by",class:"dropdown-trigger"},r.a.createElement("div",{class:"parameter-text"},t)),r.a.createElement("div",{style:{height:"0PX",display:"none"},class:"dropdown-content"},r.a.createElement("div",{"data-w-id":"4534be0a-5b81-6bc3-37f7-50b03c2e0e9f",class:"dropdown-item",onClick:function(){return n.changeQuery({sort:"hot"})}},r.a.createElement("div",{class:"parameter-text"},"Hot")),r.a.createElement("div",{"data-w-id":"eab1e4cf-2441-cd8d-fbb9-a8635a7bc9d3",class:"dropdown-item",onClick:function(){return n.changeQuery({sort:"top"})}},r.a.createElement("div",{class:"parameter-text"},"Top")),r.a.createElement("div",{"data-w-id":"4534be0a-5b81-6bc3-37f7-50b03c2e0ea2",class:"dropdown-item",onClick:function(){return n.changeQuery({sort:"new"})}},r.a.createElement("div",{class:"parameter-text"},"New")))))),r.a.createElement("div",{class:"parameters-container parameters-container-right"},r.a.createElement("div",{class:"parameters-item"},r.a.createElement("div",{class:"parameter-text parameter-item"},"From:")),r.a.createElement("div",{class:"parameters-item parameters-item-dropdown"},r.a.createElement("div",{class:"dropdown-container dropdown-container-right"},r.a.createElement("div",{"data-w-id":"4f7095d4-3b82-1424-67bc-d51c84655b1d",id:"from",class:"dropdown-trigger"},r.a.createElement("div",{class:"parameter-text"},a)),r.a.createElement("div",{class:"dropdown-content dropdown-content-right",style:{height:"0PX",display:"none"}},r.a.createElement("div",{"data-w-id":"4f7095d4-3b82-1424-67bc-d51c84655b21",class:"dropdown-item",onClick:function(){return n.changeQuery({timePeriod:"day"})}},r.a.createElement("div",{class:"parameter-text"},"Day")),r.a.createElement("div",{"data-w-id":"4f7095d4-3b82-1424-67bc-d51c84655b24",class:"dropdown-item",onClick:function(){return n.changeQuery({timePeriod:"week"})}},r.a.createElement("div",{class:"parameter-text"},"Week")),r.a.createElement("div",{"data-w-id":"4f7095d4-3b82-1424-67bc-d51c84655b24",class:"dropdown-item",onClick:function(){return n.changeQuery({timePeriod:"month"})}},r.a.createElement("div",{class:"parameter-text"},"Month")),r.a.createElement("div",{"data-w-id":"4f7095d4-3b82-1424-67bc-d51c84655b27",class:"dropdown-item",onClick:function(){return n.changeQuery({timePeriod:"all time"})}},r.a.createElement("div",{class:"parameter-text"},"All Time"))))))))}}]),t}(r.a.Component),j=a(30).default;var P=function(e){function t(e){var a;Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).upvoteClickHandler=function(){if(a.props.user){var e="#"+a.props.data._id+"slidingView",t=a.state.upvoteButtonClicked,n="#"+a.props.data._id+"button";t?(window.$(e).animate({width:"0"},200,"linear"),window.$(n).animate({opacity:0},500,"linear"),a.setState({upvoteButtonClicked:!1})):(window.$(e).animate({width:"170"},500,"easeOutExpo"),window.$(n).animate({opacity:.15},500,"linear"),a.setState({upvoteButtonClicked:!0}))}else a.props.loginHandler()},a.upvoteHandler=function(){document.getElementById(a.props.data._id+"button").click(),a.setState({alreadyVoted:!0,voteTotal:a.state.voteTotal+=.05})};var n=!1;return e.user&&e.data.votes.includes(a.props.user.id)&&(n=!0),a.state={upvoteButtonClicked:!1,alreadyVoted:n,voteTotal:e.data.voteTotal},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.state.voteTotal.toString();"."==t[t.length-2]&&(t+="0");var a=this.props.data.username,n=this.props.user&&this.props.data.userId===this.props.user.id,s=this.props.data._id+"button",o=this.props.data._id+"slidingView",i=this.state.alreadyVoted;return this.props.user&&(i=this.state.alreadyVoted||this.props.data.votes.includes(this.props.user.id)),console.log(this.props.data),r.a.createElement("div",{class:"div-block-40"},r.a.createElement("div",{class:"content-item"},r.a.createElement("div",{class:"content-item-top"},r.a.createElement("div",{class:"div-block-8"},r.a.createElement("div",{class:"text-block-8"},"$"+t),r.a.createElement("div",{class:"text-block-9",onClick:function(){return e.props.changeQueryHandler({type:"userFeed",userId:e.props.data.userId,contentType:"post",sort:"new",timePeriod:"all time"})}},a),r.a.createElement("div",{class:"text-block-6"},function(e){var t=Math.floor((new Date-e)/1e3),a=Math.floor(t/31536e3);return a>1?a+" years":(a=Math.floor(t/2592e3))>1?a+" months":(a=Math.floor(t/86400))>1?a+" days":(a=Math.floor(t/3600))>1?a+" hours":(a=Math.floor(t/60))>1?a+" minutes":Math.floor(t)+" seconds"}(1e3*this.props.data.timestamp)+" ago")),r.a.createElement("div",{class:"content-item-content content-item-content-comment"},r.a.createElement("div",{class:"text-block-24"},"in reply to ",r.a.createElement("strong",{class:"bold-text-5",onClick:function(){return e.props.changeQueryHandler({type:"post",post:e.props.data.rootPost.txid})}},this.props.data.rootPost.title)),r.a.createElement("div",{class:"comment-content"},this.props.data.comment))),r.a.createElement("div",{class:"div-block-10"},r.a.createElement("div",{class:"div-block-11"},n?null:r.a.createElement("div",{class:"action-bar-button"},r.a.createElement("div",{class:"post-action"},i?"\ud83d\uddf3\ufe0f\u2714\ufe0f":"Upvote")),r.a.createElement("div",{class:"action-bar-button",onClick:function(){return e.props.replyHandler(e.props.data)}},r.a.createElement("div",{class:"post-action"},"Reply")),r.a.createElement("div",{class:"action-bar-button",onClick:function(){return e.props.changeQueryHandler({type:"post",post:e.props.data.rootPost.txid})}},r.a.createElement("div",{class:"post-action"},"Show Thread"))))),n?null:r.a.createElement("div",{style:{backgroundColor:"black",opacity:0},onClick:this.state.alreadyVoted?null:this.upvoteClickHandler,id:s,class:"div-block-44"}),r.a.createElement("div",{style:{width:"0PX"},id:o,class:"div-block-41"},r.a.createElement("div",{class:"div-block-42"},r.a.createElement("div",{class:"div-block-43"},this.props.user?r.a.createElement(j,{label:"upvote",onPayment:this.upvoteHandler,to:"112",amount:"0.05",currency:"USD"}):null))))}}]),t}(r.a.Component),T=(a(2),function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).sendMessageHandler=function(){if(a.props.user){a.props.postDiscussionMessage(document.getElementById("name").value);var e=encodeURIComponent(document.getElementById("name").value),t=btoa(JSON.stringify({type:"postDiscussion",message:e,username:a.props.user.username}));fetch("http://127.0.0.1:2000/q/"+t),document.getElementById("name").value=""}else a.props.loginHandler()},a.returnKeyHandler=function(e){13==e.keyCode&&a.sendMessageHandler()},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;document.getElementById("name").onkeypress=function(t){return e.returnKeyHandler(t)}}},{key:"render",value:function(){var e=this.props.data,t=[];if(e)for(var a=0;a<e.length;a++)if("discussion"!=e[a].type)t.push(r.a.createElement(M,{data:e[a],changeQueryHandler:this.props.changeQueryHandler}));else{var n,s=e[a];if(this.props.user&&s.username==this.props.user.username)t.push(r.a.createElement(B,{data:s.message})),(n=e[a+1])&&"discussion"==n.type?this.props.user&&n.username!=this.props.user.username&&t.push(r.a.createElement(N,{data:this.props.user.username})):t.push(r.a.createElement(N,{data:this.props.user.username}));else t.push(r.a.createElement(Q,{data:s.message})),(n=e[a+1])&&"discussion"==n.type?n.username!=s.username&&t.push(r.a.createElement(I,{data:s.username})):t.push(r.a.createElement(I,{data:s.username}))}return r.a.createElement("div",{"data-w-id":"a59d307d-9930-6dfd-5525-555df24d9f6e",style:{display:"none"},class:"div-block-13"},r.a.createElement("div",{class:"div-block-17"},r.a.createElement("div",{class:"div-block-16"},t)),r.a.createElement("div",{class:"div-block-14"},r.a.createElement("div",{class:"form-block-2 w-form"},r.a.createElement("form",{id:"email-form",name:"email-form","data-name":"Email Form"},r.a.createElement("input",{autoComplete:"off",type:"text",class:"text-field-2 w-input",maxlength:"256",name:"name","data-name":"Name",id:"name"}))),r.a.createElement("div",{class:"div-block-35",onClick:this.sendMessageHandler},r.a.createElement("div",{class:"text-block-22"},"\u2191"))))}}]),t}(r.a.Component)),Q=function(e){return r.a.createElement("div",{class:"discussion-post"},r.a.createElement("div",{class:"text-block-12"},e.data))},B=function(e){return r.a.createElement("div",{class:"discussion-post discussion-post-right"},r.a.createElement("div",{class:"text-block-12"},e.data))},I=function(e){return r.a.createElement("div",null,r.a.createElement("div",{class:"discussion-user"},e.data))},N=function(e){return r.a.createElement("div",{class:"discussion-user discussion-user-right"},e.data)},M=function(e){var t,a,n,s,o="vote"==e.data.type,i="comment"==e.data.type,c=!o&&!i;return o?(a="Someone",t=e.data.votedOnTitle,n="voted on",s=e.data.votedOn):i?(a=e.data.username,t=e.data.rootPost.title,n="commented on",s=e.data.rootPost.txid):c&&(a=e.data.username,t=e.data.title,n="posted",s=e.data._id),r.a.createElement("div",{class:"discussion-notification"},r.a.createElement("strong",{class:"bold-text-4",onClick:function(){return e.changeQueryHandler({type:"userFeed",userId:e.data.userId,contentType:"post",sort:"new",timePeriod:"all time"})}},a)," ",n," ",r.a.createElement("strong",{class:"bold-text-3",onClick:function(){return e.changeQueryHandler({type:"post",post:s})}},t))},V=a(30).default;function _(e){for(var t="",a=0;a<e.length;a++)t+=""+e.charCodeAt(a).toString(16);return t}var q=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).closeAlert=function(){a.props.cancelReplyHandler(),a.setState({title:"",url:"",comment:""})},a.onPaymentHandler=function(){document.getElementsByClassName("div-block-34")[0].click(),a.closeAlert()},a.state={title:"",url:"",comment:""},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e,t=this,a=" ",n=this.props.replyingTo;this.props.user&&!n?a=_("13beK8bifnhuC8pawWvMrPCaWoTQi5LnZf")+" "+_("post/vote")+" "+_("post")+" "+_(encodeURIComponent(this.state.title))+" "+_(encodeURI(this.state.url))+" "+_(this.props.user.username)+" "+_(this.props.user.id):this.props.user&&n&&(a=_("13beK8bifnhuC8pawWvMrPCaWoTQi5LnZf")+" "+_("comment")+" "+_(this.props.replyingTo._id)+" "+_(encodeURIComponent(this.state.comment))+" "+_(this.props.user.username)+" "+_(this.props.user.id)),n&&(e=n.username);var s=r.a.createElement("div",{"data-w-id":"20261b05-15ea-fd10-4303-6a6538f195e4",class:"alert"},r.a.createElement("div",{class:"alert-title"},r.a.createElement("div",{class:"text-block-15"},"Submit a Link"),r.a.createElement("div",{"data-w-id":"c6b664e1-a7b1-959c-8ad1-97eaa9a9d996",onClick:this.closeAlert,class:"div-block-29"},r.a.createElement("div",{class:"text-block-16"},"X"))),r.a.createElement("div",{class:"form-block-3 w-form"},r.a.createElement("form",{id:"email-form-2",name:"email-form-2","data-name":"Email Form 2",class:"form-2"},r.a.createElement("label",{for:"node",class:"field-label"},"Write a title"),r.a.createElement("input",{onChange:function(){return t.setState({title:document.getElementById("node").value})},value:this.state.title,type:"text",maxlength:"256",id:"node",class:"text-field-3 w-input"}),r.a.createElement("label",{for:"node-2",class:"field-label-2"},"URL"),r.a.createElement("input",{type:"email",maxlength:"256",id:"node-2",class:"text-field-3 w-input",value:this.state.url,onChange:function(){return t.setState({url:document.getElementById("node-2").value})}}))),r.a.createElement("div",{class:"div-block-30"},r.a.createElement("div",{class:"div-block-34","data-w-id":"f78f9773-81a0-c31c-0a36-98ed96251b27",style:{width:0,height:0}}),r.a.createElement("div",{class:"submit-mb-container"},r.a.createElement(V,{onPayment:this.onPaymentHandler,outputs:[{amount:0,currency:"BSV",type:"SCRIPT",script:"OP_RETURN "+a}],label:"Post"})))),o=r.a.createElement("div",{"data-w-id":"20261b05-15ea-fd10-4303-6a6538f195e4",class:"alert"},r.a.createElement("div",{class:"alert-title"},r.a.createElement("div",{class:"text-block-15"},"Comment"),r.a.createElement("div",{"data-w-id":"85e8fe7e-fd06-e878-870a-8f8994664ecb",onClick:this.closeAlert,class:"div-block-29"},r.a.createElement("div",{class:"text-block-16"},"X"))),r.a.createElement("div",{class:"form-block-3 w-form"},r.a.createElement("form",{id:"email-form-2",name:"email-form-2","data-name":"Email Form 2",class:"form-2"},r.a.createElement("label",{for:"node-3",class:"field-label-3"},"Responding to ",r.a.createElement("strong",null,e)),r.a.createElement("textarea",{value:this.state.comment,onChange:function(){return t.setState({comment:document.getElementById("field").value})},name:"field",maxlength:"5000",id:"field",class:"text-field-3 comment-field w-input"}))),r.a.createElement("div",{class:"div-block-30"},r.a.createElement("div",{"data-w-id":"f78f9773-81a0-c31c-0a36-98ed96251b27",class:"div-block-34",style:{width:0,height:0}}),r.a.createElement("div",{class:"submit-mb-container",style:{width:140}},r.a.createElement(V,{onPayment:this.onPaymentHandler,outputs:[{amount:0,currency:"BSV",type:"SCRIPT",script:"OP_RETURN "+a}],label:"Reply"}))));return r.a.createElement("div",null,r.a.createElement("div",{"data-w-id":"45990265-012f-9c0a-8be9-a3e6027aab5b",style:{display:"none",opacity:"0"},class:"div-block-24"}),r.a.createElement("div",{"data-w-id":"b374f5a9-da8a-caa3-6b31-5447c2256b80",style:{display:"none"},class:"div-block-25"},n?o:s))}}]),t}(r.a.Component),J=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).runAnimationScripts=function(){var e=document.createElement("script");e.src="https://bico.media/f214f48a0f5010efe27e0e4cbc1840af2bc94aae3c695847f8b64c6afa3b5686.js",document.body.appendChild(e)},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidUpdate",value:function(){}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return this.props.data}}]),t}(r.a.Component),R=a(106),D=a(61).MoneyButtonClient,L=function(e){function t(e){var a;Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).reload=function(){console.log("reload"),a.startNotificationSocket(),a.changeQueryHandler(JSON.parse(a.state.latestQuery))},a.startNotificationSocket=function(){t&&t.close();var e=btoa(JSON.stringify({v:3,q:{find:{"out.s1":"13beK8bifnhuC8pawWvMrPCaWoTQi5LnZf"}}})),t=new EventSource("https://genesis.bitdb.network/s/1FnauZ9aUH2Bex6JzdcV4eNX7oLSSEbxtN/"+e);t.onmessage=function(e){var t=JSON.parse(JSON.stringify(JSON.parse(e.data),null,2)).data;console.log(t);var n=!0,r=!1,s=void 0;try{for(var o,i=t[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var c=o.value;if(console.log(c),"discussion"==c.out[0].s2){var l=a.state.response[1].slice();a.state.user?a.state.user.username!=c.out[0].s4&&l.push({type:"discussion",_id:c.tx.h,message:decodeURIComponent(c.out[0].s3),username:c.out[0].s4}):l.push({type:"discussion",_id:c.tx.h,message:decodeURIComponent(c.out[0].s3),username:c.out[0].s4}),a.setState({response:[a.state.response[0],l,a.state.response[2]]})}else{var d=a.state.latestQuery,u={type:"update",latestTxid:c.tx.h,query:JSON.parse(a.state.latestQuery)},m=btoa(JSON.stringify(u));fetch("https://wwww.bsvnews.today/q/"+m).then((function(e){return e.json()})).then((function(e){var t=JSON.stringify(e,null,2);t=JSON.parse(t),d==a.state.latestQuery&&a.setState({response:t})}))}}}catch(p){r=!0,s=p}finally{try{n||null==i.return||i.return()}finally{if(r)throw s}}}},a.postDiscussionMessage=function(e){var t={type:"discussion",message:e,username:a.state.user.username},n=a.state.response[1].slice();n.push(t),a.setState({response:[a.state.response[0],n,a.state.response[2]]})},a.onScrollEnd=function(e){var t=document.getElementById("content-container");t.offsetHeight+t.scrollTop>=t.scrollHeight&&a.setState({numContentItems:a.state.numContentItems+25})},a.setScrollEventListener=function(){document.getElementById("content-container").addEventListener("scroll",a.onScrollEnd)},a.fetchData=function(){var e=Object(l.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(l.a)(c.a.mark((function e(a){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=btoa(JSON.stringify(t)),fetch("https://www.bsvnews.today/q/"+n).then((function(e){return e.json()})).then((function(e){var t=JSON.stringify(e,null,2);t=JSON.parse(t),a(t)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.changeQueryHandler=function(){var e=Object(l.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({latestQuery:JSON.stringify(t)}),e.next=3,a.fetchData(t);case 3:n=e.sent,a.state.latestQuery==JSON.stringify(t)&&a.setState({query:t,response:n,numContentItems:10});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.replyHandler=function(e){a.state.user?(a.setState({replyingTo:e}),document.getElementById("composeButton").click()):a.loginHandler()},a.cancelReplyHandler=function(){setTimeout((function(){a.setState({replyingTo:null})}),500)},a.loginHandler=function(){new D("c718a0b5fd8f38f4610ae5e1bf277d97").requestAuthorization("auth.user_identity:read users.profiles:read","https://www.bsvnews.today")};var n={type:"feed",contentType:"post",sort:"top",timePeriod:"week"},r=JSON.parse(localStorage.getItem("user"));if(new URLSearchParams(window.location.search).has("code")){var s=new D("c718a0b5fd8f38f4610ae5e1bf277d97");s.handleAuthorizationResponse().then((function(){s.getIdentity().then((function(e){s.getUserProfile(e.id).then((function(e){var t=(r=e).primaryPaymail.search("@");r.username=r.primaryPaymail.substring(0,t),a.setState({user:r}),localStorage.setItem("user",JSON.stringify(e)),window.history.pushState({id:"homepage"},"BSV NEWS","https://www.bsvnews.today")}))}))}))}a.state={query:n,latestQuery:JSON.stringify(n),response:[],scriptsLoaded:!1,fontScriptsLoaded:!1,user:r,replyingTo:null,numContentItems:10};var o,i,u=btoa(JSON.stringify(a.state.query));return fetch("https://www.bsvnews.today/q/"+u).then((function(e){return e.json()})).then((function(e){var t=JSON.stringify(e,null,2);t=JSON.parse(t),a.setState({response:t},(function(){a.setScrollEventListener(),a.startNotificationSocket()}))})),window.app=Object(v.a)(a),"undefined"!==typeof document.hidden?(o="hidden",i="visibilitychange"):"undefined"!==typeof document.msHidden?(o="msHidden",i="msvisibilitychange"):"undefined"!==typeof document.webkitHidden&&(o="webkitHidden",i="webkitvisibilitychange"),"undefined"===typeof document.addEventListener||void 0===o?console.log("This demo requires a browser, such as Google Chrome or Firefox, that supports the Page Visibility API."):document.addEventListener(i,(function(){document[o]||window.app.reload()}),!1),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;document.documentElement.setAttribute("data-wf-page","5d5c432099f8055a71480feb"),document.documentElement.setAttribute("data-wf-site","5d5c1eff40c6bef7ea85f7d4"),H()("https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.4.1.min.220afd743d.js",(function(){return H()("https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.3/jquery.easing.min.js",(function(){return H()("https://bico.media/bfbad1409a5c301ddaf3ea7da214d7d2f14bf7351f4980e610c6ed47703a29b7.js",(function(){return e.setState({scriptsLoaded:!0})}))}))}))}},{key:"componentWillMount",value:function(){var e=this;H()("https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js",(function(){return H()("https://bico.media/ad5d292aade21e9aea6074d1a0cdaa8cc44b96feff80afc35aa2bdca5a3fc8c0",(function(){return e.setState({fontScriptsLoaded:!0})}))}))}},{key:"render",value:function(){var e=this,t=JSON.stringify(this.state.query)!=this.state.latestQuery||!this.state.scriptsLoaded||0==this.state.response.length,a="userFeed"==this.state.query.type&&this.state.response[2]&&"userFeed"==JSON.parse(this.state.latestQuery).type&&!t,n="post"==this.state.query.contentType||"post"==this.state.query.type,s="comment"==this.state.query.contentType,o="post"!=JSON.parse(this.state.latestQuery).type,i="post"===this.state.query.type,c=0,l=[];if(n&&this.state.response[0]){var d=!0,u=!1,m=void 0;try{for(var p,v=this.state.response[0][Symbol.iterator]();!(d=(p=v.next()).done);d=!0){var h=p.value;c<this.state.numContentItems&&(l.push(r.a.createElement(g,{loginHandler:this.loginHandler,changeQueryHandler:this.changeQueryHandler,key:h._id,data:h,postView:i,user:this.state.user,replyHandler:this.replyHandler})),c++)}}catch(B){u=!0,m=B}finally{try{d||null==v.return||v.return()}finally{if(u)throw m}}}var b,f=[];if(s&&this.state.response[0]){var y=!0,E=!1,C=void 0;try{for(var S,H=this.state.response[0][Symbol.iterator]();!(y=(S=H.next()).done);y=!0){var O=S.value;c<this.state.numContentItems&&(f.push(r.a.createElement(P,{loginHandler:this.loginHandler,changeQueryHandler:this.changeQueryHandler,key:O._id,data:O,user:this.state.user,replyHandler:this.replyHandler})),c++)}}catch(B){E=!0,C=B}finally{try{y||null==H.return||H.return()}finally{if(E)throw C}}}b=n?l:f;var j=!t&&this.state.response[0],Q=r.a.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"center"}},r.a.createElement("img",{style:{width:"40px",height:"40px"},src:"https://guerillascience.org/wp-content/plugins/bbpowerpack/images/spinner.gif"})," ");return r.a.createElement("div",{className:"body-2",style:this.state.fontScriptsLoaded?null:{opacity:0}},r.a.createElement(R.Helmet,null,r.a.createElement("meta",{charset:"utf-8"}),r.a.createElement("title",null,"BSV NEWS"),r.a.createElement("meta",{content:"width=device-width, initial-scale=1, maximum-scale=1,user-scalable=0",name:"viewport"}),r.a.createElement("meta",{content:"Webflow",name:"generator"})),r.a.createElement(w,{changeQueryHandler:this.changeQueryHandler,user:this.state.user,loginHandler:this.loginHandler}),r.a.createElement("div",{"data-w-id":"4af52811-6307-f07a-1959-d21bcda05f48",onClick:function(){setTimeout((function(){document.getElementsByClassName("div-block-17")[0].scrollTop=document.getElementsByClassName("div-block-17")[0].scrollHeight}),20)},class:"div-block-18"},r.a.createElement("img",{src:"https://bico.media/517a09f903abb8f3e723c77ca5053aa16235bbdec8760753a0837c85a4cfe521",alt:"",class:"image"})),r.a.createElement("div",{"data-w-id":"52640f80-a281-b7ac-c786-0bca7acd6636",class:"div-block-4"},r.a.createElement("div",{class:"div-block-15 smooth-scrolling",id:"content-container"},r.a.createElement("div",{class:"div-block-5",style:{width:"100%"}},a?r.a.createElement(k,{data:this.state.response[2]}):null,r.a.createElement("div",{style:o?null:{display:"none"}},r.a.createElement(x,{query:JSON.parse(this.state.latestQuery),changeSortAndFilter:this.changeQueryHandler})),j?r.a.createElement(J,{data:b}):null,t?Q:null)),r.a.createElement("div",{class:"div-block-19"},r.a.createElement("div",{"data-w-id":"4a1870aa-ff99-fbd6-0ef7-9e766b2be4be",onClick:this.state.user?null:function(){return e.loginHandler()},id:"composeButton",class:"div-block-20"},r.a.createElement("div",{class:"text-block-13"},"+")))),r.a.createElement(T,{loginHandler:this.loginHandler,postDiscussionMessage:this.postDiscussionMessage,data:this.state.response[1],changeQueryHandler:this.changeQueryHandler,user:this.state.user}),r.a.createElement(q,{user:this.state.user,replyingTo:this.state.replyingTo,cancelReplyHandler:this.cancelReplyHandler}),"}")}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(L,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[107,1,2]]]);
//# sourceMappingURL=main.750513fe.chunk.js.map