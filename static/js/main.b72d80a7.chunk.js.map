{"version":3,"sources":["components/Comment.js","components/CommentsContainer.js","components/Post.js","components/LoginAlert.js","components/ReplyForm.js","components/PostForm.js","components/SegmentedController.js","components/MobileVoteAlert.js","App.js","serviceWorker.js","index.js"],"names":["Comment","props","tx","Object","objectSpread","commentTree","path","out","s3","h","username","s5","address","in","e","a","showReplyButton","length","userId","s6","subcomments","comments","commentElements","values","sort","b","i","push","react_default","createElement","replyHandler","className","timeago","onClick","decodeURIComponent","s4","CommentContainer","commentsArray","slice","MoneyButton","require","default","convertToHex","str","hex","charCodeAt","toString","Post","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","toggleCommentsHandler","setState","showComments","state","toggleTipHandler","loggedIn","tip","editPriceHandler","votePrice","priceInput","priceInputChangeHandler","event","priceInputValue","target","value","validPrice","isNaN","price","JSON","parse","countDecimals","onPaymentHandler","defaultVotePrice","localStorage","getItem","_this2","url","decodeURI","postData","title","showCommentsFor","selfPost","s7","previouslyVoted","voters","includes","showMoneyButton","previous","elapsed","Date","now","Math","round","msPerMinute","msPerHour","msPerDay","timeDifference","timestamp","replyButton","numVotes","rewardInSatoshis","reward","initialVote","rewardInDollars","bsvPrice","dollarAmountString","postRightSide","style","height","isMobile","windowWidth","buttonClass","class","id","name","data-name","display","alignItems","type","onChange","maxlength","placeholder","whiteSpace","overflow","width","label","onPayment","outputs","amount","currency","script","to","secondButton","editVotePriceButton","voteButtonMobile","voteHandler","cursor","window","open","toggleComments","justifyContent","React","Component","windowSize","Number","prototype","floor","valueOf","split","LoginAlert","payment","input","setItem","changingUsername","loginHandler","console","log","inputOnChangeHandler","votePriceChangeHandler","paymentAmount","disableMoneyButton","alertHeight","header","login","changingVotePrice","vote","validPriceChange","loginInfoClass","loginMessage","voteInput","loginInfo","usernameInput","maxLength","xHandler","LoginAlert_MoneyButton","disabled","ReplyForm","inputChangeHandler","reply","replyingTo","hideReply","defaultValue","ReplyForm_MoneyButton","encodeURIComponent","PostForm","urlChangeHandler","titleChangeHandler","postPriceChangeHandler","postPrice","defaultPriceHandler","document","getElementsByClassName","minPriceHandler","opReturn","opreturn","encodeURI","checkedPrice","required","defineProperty","pattern","inputMode","PostForm_MoneyButton","finishSubmitHandler","SegmentedController","mobile","iOS","navigator","userAgent","switchMode","top","newMode","weekly","MobileVoteAlert","changePrice","getElementById","postTxid","votingOn","bottom","paddingTop","MobileVoteAlert_MoneyButton","chunkString","len","_offset","_size","ceil","_ret","Array","_i","substring","socket","App","processPostsVotes","transactions","posts","votes","prices","filter","valid","s2","RegExp","test","secondOutput","paidFirstOutput","donated","paidSecondOutput","v","paid","correctAddress","correctAddressSecondOutput","voterId","prevVoters","selfVote","postsArray","weeklyPosts","topPosts","post","pop","newPosts","loadPosts","b64","btoa","stringify","q","find","out.s1","limit","fetch","headers","key","then","r","json","result","t","createPostVoteSocket","close","out.s2","EventSource","onmessage","data","updatedTransactions","unshift","hideLoginAlert","showLoginAlert","submitHandler","posting","replying","mode","hideReplyFormHandler","postTransaction","loadComments","processComments","maxDepth","rootPath","sendAddress","correctSendAddress","selfComment","pathArray","query","out.s3","$regex","commentsTransactions","createCommentsSocket","socketQuery","commentsSocket","concat","mobileVoteHandler","showVoteDialogue","showDropdown","hideUIElements","reload","hidden","visibilityChange","app","assertThisInitialized","msHidden","webkitHidden","addEventListener","undefined","postElements","today","components_Post","headerRight","dropdown","src","alt","charSet","content","Helmet","paddingBottom","LoginAlert_LoginAlert","PostForm_PostForm","padding","paddingRight","margin","data-address","ReplyForm_ReplyForm","MobileVoteAlert_MobileVoteAlert","components_SegmentedController","Boolean","location","hostname","match","ReactDOM","render","src_App_0","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.b72d80a7.chunk.js","sourcesContent":["import React from 'react';\n\nexport default function Comment(props) {\n\n  var tx={...props.commentTree.tx};\n\n  var path = tx.out[0].s3+tx.tx.h;\n  var username = tx.out[0].s5;\n  var address = tx.in[0].e.a\n  var showReplyButton = path.length/64<6 && props.userId!=tx.out[0].s6\n\n  var subcomments = {...props.commentTree};\n  delete subcomments.tx;\n  delete subcomments.comments;\n\n  subcomments = Object.values(subcomments);\n\n  var commentElements=[];\n\n  subcomments.sort(function(a,b){\n    return b.comments-a.comments;\n  })\n\n  for(let i=0;i<subcomments.length;i++){\n    commentElements.push(<Comment replyHandler={props.replyHandler} userId={props.userId} commentTree={subcomments[i]}/>)\n  }\n  \n\n  \n  return (\n    <div className=\"comment\">\n      <div className=\"comment-metadata\">\n\n        <div className=\"metadata\">{tx.out[0].s5}</div>\n        <div className=\"metadata\">{tx.timeago}</div>\n        {showReplyButton?<div className=\"metadata metadata-button\" onClick={() => props.replyHandler(path, username, address )}> reply</div>:null}\n      </div>\n      <div className=\"comment-content\">{decodeURIComponent(tx.out[0].s4)}</div>\n      {commentElements}\n    </div>\n  )\n}","import React from 'react';\nimport Comment from './Comment';\n\n\nexport default function CommentContainer(props){\n\n    var commentsArray = props.comments.slice();\n\n    commentsArray.sort(function (a,b){\n      return b.comments - a.comments;\n    })\n\n    var commentElements = [];\n    if(props.comments){\n      for(let i=0;i<props.comments.length;i++){\n        commentElements.push(<Comment replyHandler={props.replyHandler} userId={props.userId} commentTree={commentsArray[i]}/>)\n      }\n    }\n    \n\n    return(\n        <div className=\"comments-container\">\n          {commentElements}\n          {commentElements.length==0?\"No comments!\":null}\n        </div>\n    )\n}","import React from 'react';\nimport Comment from './Comment';\nimport windowSize from 'react-window-size';\n\nimport CommentContainer from './CommentsContainer';\nlet MoneyButton = require('@moneybutton/react-money-button').default\n\nfunction convertToHex(str) {\n  var hex = '';\n  for (var i = 0; i < str.length; i++) {\n    hex += '' + str.charCodeAt(i).toString(16);\n  }\n  return hex;\n}\n\nfunction timeDifference(previous) {\n\n  var msPerMinute = 60 * 1000;\n  var msPerHour = msPerMinute * 60;\n  var msPerDay = msPerHour * 24;\n  var msPerMonth = msPerDay * 30;\n  var msPerYear = msPerDay * 365;\n\n  var elapsed = Date.now() - previous;\n\n  if (elapsed < msPerMinute) {\n    return Math.round(elapsed / 1000) + ' seconds ago';\n  }\n\n  else if (elapsed < msPerHour) {\n    return Math.round(elapsed / msPerMinute) + ' minutes ago';\n  }\n\n  else if (elapsed < msPerDay) {\n    return Math.round(elapsed / msPerHour) + ' hours ago';\n  }\n\n  else if (elapsed < msPerMonth) {\n    return Math.round(elapsed / msPerDay) + ' days ago';\n  }\n\n  else if (elapsed < msPerYear) {\n    return Math.round(elapsed / msPerMonth) + ' months ago';\n  }\n\n  else {\n    return Math.round(elapsed / msPerYear) + ' years ago';\n  }\n}\n\nclass Post extends React.Component {\n\n\n  constructor(props) {\n    super(props);\n    this.state = {\n\n      showComments: false,\n      // I repurposed tipping functionality to be editing the price of the vote.\n      tip: false,\n      votePrice: localStorage.getItem('votePrice'),\n      priceInput:'',\n      validPrice:''\n    }\n  }\n\n\n\n\n\n  toggleCommentsHandler = () => {\n    this.setState({\n      showComments: !this.state.showComments\n    })\n  }\n\n  toggleTipHandler = () => {\n    if (this.props.loggedIn) {\n      this.setState({ tip: !this.state.tip })\n    } else {\n      this.props.replyHandler()//prompts user to Login\n    }\n  }\n\n  editPriceHandler = () => {\n    \n    this.setState({\n      tip: false,\n      votePrice: this.state.priceInput\n    })\n  }\n\n  priceInputChangeHandler = event =>{\n    var priceInputValue = event.target.value;\n    var NaN = isNaN(priceInputValue);\n    var validPrice=false;\n    var price;\n\n    if(!NaN){\n      if(priceInputValue==\"0.\"||priceInputValue==\"0.0\"){\n        price=0;\n      } else{\n        var price = JSON.parse(event.target.value)\n      }\n      \n      if(price.countDecimals()<3 & price>=0.01){\n        validPrice=true;\n      }\n    } \n    this.setState({\n      priceInput: event.target.value,\n      validPrice\n      \n    })\n  }\n  \n  onPaymentHandler=()=>{\n    this.setState({\n      votePrice:this.props.defaultVotePrice\n    })\n  }\n\n\n\n  render() {\n\n    var url = decodeURI(this.props.postData.tx.out[0].s5)\n    var title = decodeURIComponent(this.props.postData.tx.out[0].s4)\n    var username = this.props.postData.tx.out[0].s6\n    var showComments = this.props.showCommentsFor == this.props.postData.tx.tx.h\n    var selfPost = this.props.postData.tx.out[0].s7 == this.props.userId;\n    var previouslyVoted = this.props.postData.voters.includes(this.props.userId);\n    var showMoneyButton = !selfPost && !previouslyVoted\n    var timeago;\n    this.props.postData.tx.timeago ? timeago = this.props.postData.tx.timeago : timeago = timeDifference(this.props.postData.tx.timestamp);\n    var numVotes = this.props.postData.voters.length + 1\n\n\n    var rewardInSatoshis = this.props.postData.reward;\n    var initialVote = this.props.postData.initialVote\n    var rewardInBitcoin = JSON.parse(((rewardInSatoshis + initialVote) / 100000000));\n    var rewardInDollars = rewardInBitcoin * this.props.bsvPrice;\n    var dollarAmountRounded = Math.round(rewardInDollars * 100) / 100\n    var dollarAmountString = dollarAmountRounded.toString();\n    var postRightSide = (<div style={{ height: 50 }} />)\n\n    var isMobile = this.props.windowWidth < 480;\n    var loggedIn = this.props.loggedIn;\n\n\n    if (this.props.loggedIn && !this.state.tip && !isMobile) {\n      postRightSide = (<div style={{ width: 140 }} ><MoneyButton\n        label='vote'\n        onPayment={this.onPaymentHandler}\n\n        outputs={[\n          {\n            amount: 0,\n            currency: 'BSV',\n            type: 'SCRIPT',\n            script: 'OP_RETURN ' + convertToHex('13beK8bifnhuC8pawWvMrPCaWoTQi5LnZf') + ' ' + convertToHex('post/vote') + ' ' + convertToHex('vote') + ' ' + convertToHex(this.props.postData.tx.tx.h) + ' ' + convertToHex(this.props.userId)\n\n          }, {\n            to: this.props.postData.tx.in[0].e.a,\n            amount: this.state.votePrice,\n            currency: 'USD',\n\n\n          }\n\n        ]}\n\n\n      /></div>)\n    } else if (this.props.loggedIn && this.state.tip) {\n      var buttonClass;\n      var validPrice = this.state.validPrice\n      validPrice?buttonClass='header-button':buttonClass='header-button button-greyed'\n      postRightSide = (\n      <div class=\"price-edit-form-block w-form\">\n        <form id=\"email-form-4\" name=\"email-form-4\" data-name=\"Email Form 4\" class=\"form-3\">\n          <div class=\"price-edit-container\" style={{display:'flex', alignItems:'center'}}>\n            <input type=\"text\" class=\"text-field price-field w-input\" onChange={this.priceInputChangeHandler}\n            maxlength=\"256\" name=\"name-2\" data-name=\"Name 2\" placeholder=\"Vote Price (USD)\" id=\"name-2\" />\n            <div class={buttonClass} onClick={validPrice? this.editPriceHandler:()=>null} >\n              <div class=\"header-button-text dropdown-text\" style={{whiteSpace:'nowrap',overflow:'none'}}>set price</div>\n            </div>\n\n          </div>\n        </form>\n\n      </div>)\n    }\n\n\n    if (dollarAmountString.length == 1) {\n      dollarAmountString += '.00'\n    }\n\n\n    var replyButton;\n    loggedIn && !selfPost?replyButton = (\n      <div className=\"post-button\" onClick={() => this.props.replyHandler(this.props.postData.tx.tx.h, username, this.props.postData.tx.in[0].e.a)}>\n        <div className=\"metadata post-button-text\" >reply</div>\n      </div>\n    ): replyButton=null;\n\n    var editVotePriceButton = (\n      <div className=\"post-button\" onClick={this.toggleTipHandler}>\n        <div className=\"metadata post-button-text\" onClick={this.toggleTipHandler}>{this.state.tip ? 'cancel' : 'edit price'}</div>\n\n      </div>\n    )\n\n    var voteButtonMobile = (\n      <div className='post-button' onClick={()=>this.props.voteHandler(this.props.postData)}>\n        <div className=\"metadata post-button-text\">vote</div>\n      </div>\n    )\n    var secondButton;\n    isMobile ? secondButton = voteButtonMobile : secondButton = editVotePriceButton;\n\n    return (\n\n      <div className=\"post-container\"  >\n        <div className='post'>\n          <div style={{width:'100%'}}>\n            <div className=\"post-data\">\n              <div className=\"reward\">${dollarAmountString} <strong></strong></div>\n              <div className=\"post-title\" style={{ cursor: 'pointer' }} onClick={() => window.open(url)}>{title}</div>\n            </div>\n            <div className=\"post-metadata\" >\n              <div className='div-block-5'>\n                <div className=\"metadata\"> ({numVotes} vote{numVotes == 1 ? null : 's'})</div>\n                <div className=\"metadata\"> {timeago}</div>\n                <div className=\"metadata\">{username}</div>\n\n                <div className=\"metadata\" style={{ cursor: 'pointer' }} onClick={() => this.props.toggleComments(this.props.postData.tx)} > {showComments ? 'comments ▼' : 'comments ▶'}</div>\n\n              </div>\n              <div className='div-block-5'>\n                {replyButton}\n                {loggedIn && !selfPost && !previouslyVoted ? secondButton : null}\n              </div>\n\n\n            </div>\n          </div>\n          {!showMoneyButton && !this.state.tip ? <div className=\"hide-mobile\"><div className=\"hide-mobile\" style={{ height: 50, width: 120, display: 'flex', alignItems: 'center', justifyContent: 'center' }}>{previouslyVoted ? \"Voted! 🗳️\" : null}</div></div> : postRightSide}\n\n        </div>\n\n        {showComments ? <CommentContainer replyHandler={this.props.replyHandler} userId={this.props.userId} comments={this.props.comments} /> : null}\n      </div>\n\n\n\n    );\n  }\n}\n\nexport default windowSize(Post);\n\n","import React from 'react';\nimport Cookies from 'universal-cookie';\nlet MoneyButton = require('@moneybutton/react-money-button').default\n\nNumber.prototype.countDecimals = function () {\n  if(Math.floor(this.valueOf()) === this.valueOf()) return 0;\n  return this.toString().split(\".\")[1].length || 0; \n}\n\nexport default class LoginAlert extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      input: '',\n      priceInput: '',\n      validPrice: false\n    }\n  }\n\n  onPaymentHandler = (payment) => {\n\n    if (this.state.input != '') {\n      localStorage.setItem('userId', payment.userId.toString(), { path: '/' });\n      localStorage.setItem('username', this.state.input, { path: '/' });\n      //checks if change price alert\n      if(!this.props.changingUsername&&!this.props.changingUsername) {\n        localStorage.setItem('votePrice',this.state.priceInput);}\n      this.props.loginHandler();\n    }\n\n    console.log(payment.userId)\n    console.log(payment);\n  }\n\n  inputOnChangeHandler = (event) => {\n    this.setState({\n      input: event.target.value\n    })\n  }\n\n  priceInputChangeHandler = event =>{\n    var priceInputValue = event.target.value;\n    var NaN = isNaN(priceInputValue);\n    var validPrice=false;\n    var price;\n\n    if(!NaN){\n      if(priceInputValue==\"0.\"||priceInputValue==\"0.0\"){\n        price=0;\n      } else{\n        var price = JSON.parse(event.target.value)\n      }\n      \n      if(price.countDecimals()<3 & price>=0.01){\n        validPrice=true;\n      }\n    } \n    this.setState({\n      priceInput: event.target.value,\n      validPrice\n      \n    })\n  }\n\n  votePriceChangeHandler=()=>{\n    localStorage.setItem('votePrice',this.state.priceInput);\n    this.props.votePriceChangeHandler();\n  }\n\n\n  render() {\n    console.log(this.props.changingUsername);\n    var paymentAmount;\n    var login = !this.props.changingUsername & !this.props.changingVotePrice;\n    var username = this.props.changingUsername;\n    var vote = this.props.changingVotePrice;\n    var validPriceChange = vote && this.state.validPrice && this.state.priceInput!='';\n\n    var disableMoneyButton;\n    if(login){\n      disableMoneyButton=!(this.state.validPrice && this.state.input!=='')\n    } else {\n      disableMoneyButton=!(username&&this.state.input!=='')\n    }\n    \n   \n\n    username ? paymentAmount = '1' : paymentAmount = '0.01';\n    var alertHeight;\n    if (login) {\n      alertHeight = 230\n    } else if (username) {\n      alertHeight = 140\n    } else {\n      alertHeight = 150\n    }\n    console.log(alertHeight)\n\n    var header;\n    if (login) {\n      header = 'Login';\n    } else if (username) {\n      header = \"Change Username\";\n    } else {\n      header = \"Change Vote Price\";\n    }\n\n    var loginInfoClass = 'login-info';\n    var loginMessage = \"*On bsvnews, you can upvote other users' content. Set the default amount of money you would like to give them for each upvote. You can change this later. Your default price must be $0.01 or higher.\"\n    if ((login || vote) && (this.state.validPrice == false & this.state.priceInput!='')) {\n      loginInfoClass += ' login-info-red';\n      loginMessage = \"*Please enter a valid vote price (ex. 0.25).\"\n    }\n    var loginInfo = (\n      <div class={loginInfoClass}>{loginMessage}</div>\n\n    )\n\n    var usernameInput = (\n      <input type=\"text\" class=\"login-username w-input\" maxLength=\"15\" name=\"name-2\"\n        data-name=\"Name 2\" placeholder=\"Desired username\" id=\"name-2\"\n        onChange={this.inputOnChangeHandler} />\n    )\n\n    var voteInput;\n    if (login) {\n      voteInput = (\n        <div className=\"vote-price-container\">\n          <input type=\"text\" onChange={this.priceInputChangeHandler}\n          class=\"login-username w-input\" maxlength=\"5\" name=\"name-2\" data-name=\"Name 2\"\n          placeholder=\"Default vote price (USD)\" id=\"name-2\" />\n        </div>\n        \n      )\n    } else if (vote) {\n      var buttonClass;\n      this.state.validPrice?buttonClass='header-button':buttonClass='header-button button-greyed'\n      voteInput = (\n      <div className='vote-price-container'>\n        <input type=\"text\" onChange={this.priceInputChangeHandler}\n          class=\"login-username w-input vote-price\" maxlength=\"5\" name=\"name-2\" data-name=\"Name 2\"\n          placeholder=\"Default vote price (USD)\" id=\"name-2\" />\n        <div className={buttonClass} onClick={validPriceChange?this.votePriceChangeHandler:()=>null}>\n          <div className='header-button-text dropdown-text'>set price</div>\n        </div>\n\n      </div>\n      );\n\n    }\n\n    return (\n      <div class=\"login-container\">\n        <div class=\"login-alert w-form\" style={{ height: alertHeight }}>\n          <form id=\"email-form-3\" name=\"email-form-3\" data-name=\"Email Form 3\" class=\"login-form\">\n\n            <div class=\"x-container\" >\n              <div className=\"div-block-4\">\n                <div class=\"login-title\">{header}</div>\n              </div>\n\n              <div class=\"login-cancel\" onClick={this.props.xHandler}>X</div>\n            </div>\n            <form id=\"email-form-3\" name=\"email-form-3\" data-name=\"Email Form 3\" class=\"login-form\">\n              <div class=\"inputs-container\">\n                {login || username ? usernameInput : null}\n                {login || vote ? [voteInput, loginInfo] : null}\n\n\n              </div>\n            </form>\n\n            {login  || this.props.changingUsername ? <div className=\"mb-container\" ><MoneyButton\n              to='1ir1uFc24GBdtQC3HiCUfykfMYZQb9GfE'\n              label='submit'\n              amount={paymentAmount}\n              currency='USD'\n              onPayment={this.onPaymentHandler}\n              disabled={disableMoneyButton}\n            /></div> : null}\n          </form>\n\n        </div>\n      </div>\n\n    );\n  }\n}\n\n{/* <div className=\"login-container\">\n        <div className=\"login-alert w-form\">\n          <form id=\"email-form-3\" name=\"email-form-3\" data-name=\"Email Form 3\" className=\"login-form\">\n            <div className=\"div-block-2\" onClick={this.props.xHandler}>\n              <div className=\"login-cancel\" >X</div>\n            </div>\n            <div className=\"login-title\" style={{ pointerEvents: 'none' }} >Login</div>\n            <input\n              onChange={this.inputOnChangeHandler}\n              type=\"text\"\n              className=\"login-username w-input\"\n              maxLength={256} name=\"name-2\"\n              data-name=\"Name 2\"\n              placeholder=\"Desired Username\" id=\"name-2\" />\n            <div className=\"mb-container\" ><MoneyButton\n              to='112'\n              amount={paymentAmount}\n              currency='USD'\n              onPayment={this.onPaymentHandler}\n            /></div>\n          </form>\n\n        </div>\n      </div> */}","import React from 'react';\nlet MoneyButton = require('@moneybutton/react-money-button').default\n\n var convertToHex=(str)=> {\n  var hex = '';\n  for (var i = 0; i < str.length; i++) {\n      hex += '' + str.charCodeAt(i).toString(16);\n  }\n  return hex;\n}\n\n\nexport default class ReplyForm extends React.Component {\n  constructor(props){\n    super(props);\n    this.state={\n      reply:''\n    }\n\n  }\n\n  inputChangeHandler=(e)=>{\n    this.setState({\n      reply:e.target.value\n    })\n    \n  }\n\n  render() {\n    return (\n      <div className=\"new-reply-container\">\n        <div className=\" w-form\">\n          <form id=\"email-form-2\" name=\"email-form-2\" data-name=\"Email Form 2\" className=\"m-vote-price-form\">\n            <div className=\"div-block\">\n              <div style={{display:'flex',alignItems:'center'}}>Replying to: {this.props.replyingTo.username}</div>\n              <div className=\"login-cancel\" onClick={this.props.hideReply}>X</div>\n            </div>\n            <textarea onChange={this.inputChangeHandler} id=\"field\" name=\"field\" placeholder=\"Example Text\" maxLength={5000} className=\"textarea w-input\" defaultValue={\"\"} />\n            <MoneyButton\n              label=\"post\"\n              outputs={[\n                {\n                  amount: 0,\n                  currency: 'BSV',\n                  type: 'SCRIPT',\n                  script: 'OP_RETURN ' + convertToHex('13beK8bifnhuC8pawWvMrPCaWoTQi5LnZf') + ' ' + convertToHex('comment') + ' ' + convertToHex(this.props.replyingTo.path) + ' ' + convertToHex(encodeURIComponent(this.state.reply)) + ' ' + convertToHex(this.props.username) +' ' + convertToHex(this.props.userId)\n\n                }, {\n                  to: this.props.replyingTo.address,\n                  amount: '0.01',\n                  currency: 'USD'\n\n                }\n              ]}\n              onPayment={this.props.hideReply}\n\n            />\n          </form>\n        </div>\n      </div>\n    )\n  }\n}","import React from 'react';\nlet MoneyButton = require('@moneybutton/react-money-button').default\n\nfunction convertToHex(str) {\n    var hex = '';\n    for (var i = 0; i < str.length; i++) {\n        hex += '' + str.charCodeAt(i).toString(16);\n    }\n    return hex;\n}\n\nNumber.prototype.countDecimals = function () {\n    if (Math.floor(this.valueOf()) === this.valueOf()) return 0;\n    return this.toString().split(\".\")[1].length || 0;\n}\n\n\nexport default class PostForm extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            url: '',\n            title: '',\n            opReturn: '',\n            postPrice: '',\n            validPrice: false\n\n        }\n    }\n\n\n\n\n    urlChangeHandler = (e) => {\n        this.setState({\n            url: e.target.value\n        })\n    }\n\n    titleChangeHandler = (e) => {\n        this.setState({\n            title: e.target.value\n        })\n\n    }\n\n    postPriceChangeHandler = (e) => {\n        var NaN = isNaN(e.target.value);\n        var validPrice = false;\n        if (!NaN) {\n            var price = JSON.parse(e.target.value)\n            if (price.countDecimals() < 3 & price >= 0.01) {\n                validPrice = true;\n            }\n        }\n        this.setState({\n            postPrice: e.target.value,\n            validPrice\n\n        })\n\n    }\n\n\n    defaultPriceHandler = () => {\n        document.getElementsByClassName('price-field')[0].value = localStorage.getItem('votePrice');\n        this.setState({\n            validPrice: true,\n            postPrice: localStorage.getItem('votePrice')\n        });\n    }\n\n    minPriceHandler = () =>{\n        document.getElementsByClassName('price-field')[0].value = '0.01';\n        this.setState({\n            validPrice: true,\n            postPrice: '0.01'\n        });\n    }\n\n    render() {\n        var opreturn = convertToHex('13beK8bifnhuC8pawWvMrPCaWoTQi5LnZf') + ' ' + convertToHex('post/vote') + ' ' + convertToHex('post') + ' ' + convertToHex(encodeURIComponent(this.state.title)) + ' ' + convertToHex(encodeURI(this.state.url)) + ' ' + convertToHex(this.props.username) + ' ' + convertToHex(this.props.userId)\n        var checkedPrice=null;\n       \n        if(this.state.validPrice){\n            checkedPrice=this.state.postPrice\n        }\n        return (\n            <div className=\"new-post w-form\">\n                <form id=\"email-form\" name=\"email-form\" data-name=\"Email Form\" className=\"form\">\n                    <input onChange={this.titleChangeHandler} type=\"text\" className=\"text-field w-input\" maxLength={256} name=\"name\" data-name=\"Name\" placeholder=\"Post Title\" id=\"name\" />\n                    <input onChange={this.urlChangeHandler} type=\"email\" className=\"text-field w-input\" maxLength={256} name=\"email\" data-name=\"Email\" placeholder=\"Post URL\" id=\"email\" required />\n                    <div class=\"post-price-container\">\n                        <input type=\"text\" id='postPriceInput' pattern=\"\\d*\" inputMode='decimal'  onChange={this.postPriceChangeHandler} class=\"text-field price-field w-input\" maxlength=\"256\"\n                            name=\"name-2\" data-name=\"Name 2\" placeholder=\"Vote Price (USD)\" id=\"name-2\" />\n                        <div class=\"header-button\" onClick={this.defaultPriceHandler}>\n                            <div class=\"header-button-text dropdown-text\">default price</div>\n                        </div>\n                        <div class=\"header-button\" onClick={this.minPriceHandler}>\n                            <div class=\"header-button-text dropdown-text\">$0.01</div>\n                        </div>\n                    </div>\n                    <div className=\"text-block-7\">*Enter in the price of your initial vote on your own post. You can think of it as paying for a form of advertisement as your post may get noticed more. Must be more than $0.01.</div>\n                    <MoneyButton\n                        outputs={[\n                            {\n                                amount: 0,\n                                currency: 'BSV',\n                                type: 'SCRIPT',\n                                script: 'OP_RETURN ' + opreturn\n\n                            }, {\n                                to: '1ir1uFc24GBdtQC3HiCUfykfMYZQb9GfE',\n                                amount: checkedPrice,\n                                currency: 'USD'\n\n                            }\n                        ]}\n                        \n                        label='submit'\n                        disabled={!this.state.validPrice}\n\n\n                        onPayment={this.props.finishSubmitHandler}\n                    />\n                </form>\n\n            </div>\n        );\n    }\n}","import React from 'react';\nimport windowSize from 'react-window-size';\n\nclass SegmentedController extends React.Component {\n\n    render() {\n        var mobile = this.props.windowWidth < 480\n        var iOS = navigator.userAgent.includes('iPhone');\n\n        if (mobile & iOS) {\n            return (\n                <div class=\"m-n-segmented-controller-container\">\n                    <div class=\"m-n-segmented-controller\">\n                        <div class={\"m-n-tab-button\"}\n                            onClick={() => { this.props.switchMode('top') }}>\n                            <div class=\"m-n-tab-button-text\">Top</div>\n                        </div>\n                        <div class={\"m-n-tab-button\"} onClick={() => this.props.switchMode('new')} >\n                            <div class=\"m-n-tab-button-text\">New</div>\n                        </div>\n\n                        <div class={\"m-n-tab-button\"} onClick={() => this.props.switchMode('weekly')} >\n                            <div class=\"m-n-tab-button-text\">Weekly</div>\n                        </div>\n\n                    </div>\n                </div>\n            )\n        } else if (mobile & !iOS) {\n            return (\n            <div class=\"m-n-segmented-controller-container\">\n                <div class=\"m-n-segmented-controller\">\n                    <div class={this.props.top ? \"m-n-tab-button m-n-tab-button-selected\" : \"m-n-tab-button\"}\n                        onClick={() => { this.props.switchMode('top') }}>\n                        <div class=\"m-n-tab-button-text\">Top</div>\n                    </div>\n                    <div class={this.props.newMode ? \"m-n-tab-button m-n-tab-button-selected\" : \"m-n-tab-button\"} onClick={() => this.props.switchMode('new')} >\n                        <div class=\"m-n-tab-button-text\">New</div>\n                    </div>\n\n                    <div class={this.props.weekly ? \"m-n-tab-button m-n-tab-button-selected\" : \"m-n-tab-button\"} onClick={() => this.props.switchMode('weekly')} >\n                        <div class=\"m-n-tab-button-text\">Weekly</div>\n                    </div>\n\n                </div>\n            </div>)\n        }\n        else {\n            return null;\n        }\n\n    }\n}\n\nexport default windowSize(SegmentedController);","import React from 'react';\nlet MoneyButton = require('@moneybutton/react-money-button').default\n\nfunction convertToHex(str) {\n    var hex = '';\n    for (var i = 0; i < str.length; i++) {\n      hex += '' + str.charCodeAt(i).toString(16);\n    }\n    return hex;\n  }\n\n\nexport default class MobileVoteAlert extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            votePrice: this.props.votePrice,\n            priceInput:this.props.votePrice,\n            validPrice:true\n        }\n    }\n\n    changePrice = (price) =>{\n        document.getElementById('name-2').value=price;\n        this.setState({\n            votePrice:price\n        })\n    }\n\n    priceInputChangeHandler = event =>{\n        var priceInputValue = event.target.value;\n        var NaN = isNaN(priceInputValue);\n        var validPrice=false;\n        var price;\n    \n        if(!NaN){\n          if(priceInputValue==\"0.\"||priceInputValue==\"0.0\"){\n            price=0;\n          } else{\n            var price = JSON.parse(event.target.value)\n          }\n          \n          if(price.countDecimals()<3 & price>=0.01){\n            validPrice=true;\n          }\n        } \n        this.setState({\n          priceInput: event.target.value,\n          validPrice\n          \n        })\n      }\n\n    render() {\n        var postTxid = this.props.votingOn.tx.h;\n        var address = this.props.votingOn.in[0].e.a\n        var validPrice = this.state.validPrice;\n        var buttonClass;\n        validPrice?buttonClass='header-button':buttonClass='header-button button-greyed'\n\n        return (\n            <div class=\"new-reply-container m-vote-container\" style={{ bottom: 75 }} >\n                <div class=\"m-vote-price-form-block w-form\">\n                    <form id=\"email-form-2\" name=\"email-form-2\" data-name=\"Email Form 2\" class=\"m-vote-price-form\">\n                        <div  >\n                            <div style={{ display: 'flex', justifyContent: 'space-between' }}>\n                                <div class=\"post-price-container\" style={{ paddingTop: 10 }}  >\n                                    <div class=\"header-button\" onClick={()=>this.changePrice('1')} >\n                                        <div class=\"header-button-text dropdown-text\">$1</div>\n                                    </div>\n                                    <div class=\"header-button\" onClick={()=>this.changePrice('0.5')} >\n                                        <div class=\"header-button-text dropdown-text\">$0.50</div>\n                                    </div>\n                                    <div class=\"header-button\" onClick={()=>this.changePrice('0.05')} >\n                                        <div class=\"header-button-text dropdown-text\">$0.05</div>\n                                    </div>\n                                    <div class=\"header-button\" onClick={()=>this.changePrice('0.01')} >\n                                        <div class=\"header-button-text dropdown-text\">$0.01</div>\n                                    </div>\n\n                                </div>\n                                <div class=\"login-cancel\" onClick={this.props.xHandler} >X</div>\n                            </div>\n\n                            <div class=\"post-price-container\" style={{ paddingTop: 10 }}  >\n                                <input  onChange={this.priceInputChangeHandler} type=\"text\" pattern=\"\\d*\" inputMode='decimal' class=\"text-field price-field w-input\" maxlength=\"256\" defaultValue={this.state.votePrice}\n                                    name=\"name-2\" data-name=\"Name 2\" placeholder=\"Vote Price (USD)\" id=\"name-2\" />\n                                <div class={buttonClass} onClick={validPrice?()=>this.changePrice(this.state.priceInput):()=>null} >\n                                    <div class=\"header-button-text dropdown-text\">set price</div>\n                                </div>\n\n                            </div>\n\n                            <div style={{ paddingTop: 10 }}>\n                                <MoneyButton\n                                    label='vote'\n                                    onPayment={this.props.xHandler}\n\n                                    outputs={[\n                                        {\n                                            amount: 0,\n                                            currency: 'BSV',\n                                            type: 'SCRIPT',\n                                            script: 'OP_RETURN ' + convertToHex('13beK8bifnhuC8pawWvMrPCaWoTQi5LnZf') + ' ' + convertToHex('post/vote') + ' ' + convertToHex('vote') + ' ' + convertToHex(postTxid) + ' ' + convertToHex(this.props.userId)\n\n                                        }, {\n                                            to: address,\n                                            amount: this.state.votePrice,\n                                            currency: 'USD',\n\n\n                                        }\n\n                                    ]}\n\n\n                                />\n                            </div>\n\n\n\n                        </div>\n                    </form>\n\n                </div>\n            </div>\n        );\n    }\n}","import React, { Component } from 'react';\nimport './App.css';\nimport Post from './components/Post.js';\nimport Cookies from 'universal-cookie';\nimport LoginAlert from './components/LoginAlert';\nimport ReplyForm from './components/ReplyForm';\nimport PostForm from './components/PostForm';\nimport SegmentedController from './components/SegmentedController';\nimport { Helmet } from 'react-helmet';\nimport MobileVoteAlert from './components/MobileVoteAlert';\nlet MoneyButton = require('@moneybutton/react-money-button').default\n\nfunction chunkString(str, len) {\n  var _size = Math.ceil(str.length / len),\n    _ret = new Array(_size),\n    _offset\n    ;\n\n  for (var _i = 0; _i < _size; _i++) {\n    _offset = _i * len;\n    _ret[_i] = str.substring(_offset, _offset + len);\n  }\n\n  return _ret;\n}\n\nfunction validURL(str) {\n  var pattern = new RegExp('^(https?:\\\\/\\\\/)?' + // protocol\n    '((([a-z\\\\d]([a-z\\\\d-]*[a-z\\\\d])*)\\\\.)+[a-z]{2,}|' + // domain name\n    '((\\\\d{1,3}\\\\.){3}\\\\d{1,3}))' + // OR ip (v4) address\n    '(\\\\:\\\\d+)?(\\\\/[-a-z\\\\d%_.~+]*)*' + // port and path\n    '(\\\\?[;&a-z\\\\d%_.~+=-]*)?' + // query string\n    '(\\\\#[-a-z\\\\d_]*)?$', 'i'); // fragment locator\n  return !!pattern.test(str);\n}\n\nvar socket = null;\n\nclass App extends Component {\n\n\n  constructor(props) {\n    super(props);\n\n\n    const username = localStorage.getItem('username');\n    const userId = localStorage.getItem('userId');\n    const votePrice = localStorage.getItem('votePrice');\n\n    var state = {\n      showLoginAlert: false,\n      showDropdown: false,\n      showCommentsFor: null,\n      showVoteDialogue: false,\n      votingOn: null,\n      changingUsername: false,\n      changingVotePrice: false,\n      defaultVotePrice: null,\n      loggedIn: false,\n      replying: false,\n      replyingTo: null,\n      posting: false,\n      commentsTransactions: null,\n      comments: null,\n      mode: 'top',\n      userId: null,\n      username: null,\n      transactions: [],\n      topPosts: [],\n      newPosts: [],\n      weeklyPosts: [],\n      bsvPrice: null\n\n    }\n\n    if (username && userId && votePrice) {\n      state.username = username;\n      state.userId = userId;\n      state.votePrice = votePrice;\n      state.loggedIn = true;\n    }\n    this.state = state;\n    this.loadPosts();\n    this.createPostVoteSocket();\n    window.app = this;\n\n    var hidden, visibilityChange;\n    if (typeof document.hidden !== \"undefined\") { // Opera 12.10 and Firefox 18 and later support \n      hidden = \"hidden\";\n      visibilityChange = \"visibilitychange\";\n    } else if (typeof document.msHidden !== \"undefined\") {\n      hidden = \"msHidden\";\n      visibilityChange = \"msvisibilitychange\";\n    } else if (typeof document.webkitHidden !== \"undefined\") {\n      hidden = \"webkitHidden\";\n      visibilityChange = \"webkitvisibilitychange\";\n    }\n\n\n    function handleVisibilityChange() {\n      if (!document[hidden]) {\n        window.app.reload();\n      }\n    }\n\n    // Warn if the browser doesn't support addEventListener or the Page Visibility API\n    if (typeof document.addEventListener === \"undefined\" || hidden === undefined) {\n      console.log(\"This demo requires a browser, such as Google Chrome or Firefox, that supports the Page Visibility API.\");\n    } else {\n      // Handle page visibility change   \n      document.addEventListener(visibilityChange, handleVisibilityChange, false);\n\n    }\n    \n\n   \n  }\n\n  componentDidMount(){\n   \n  }\n\n\n\n\n\n  processPostsVotes = (transactions) => {\n    //make sure there are the right number of pushdata's\n\n    var posts = {};\n    var votes = [];\n    var prices = []\n\n    //filter invalid tx's and separate posts from votes\n    var transactions = transactions.filter(tx => {\n      var valid = false\n      if (tx.out[0].s3) {\n        if (tx.out[0].s2 == 'price' && tx.out[0].s4) {\n          prices.push(JSON.parse(tx.out[0].s4));\n        }\n\n        if (tx.out[0].s3 == 'post') {\n          //checks for the right number of pushdata's\n          valid = tx.out[0].s7 && (validURL(decodeURI(tx.out[0].s5)) || decodeURI(tx.out[0].s5).includes('medium'))\n          if (valid) {\n            //donation sometimes happens in second output\n            var secondOutput = false\n            if (tx.out[2]) {\n              secondOutput = tx.out[2].e.a == '1JM394PQB47chcs49PCe3JETLDaBwzieBP'\n            }\n            //checks both outputs for donation\n            var donated = tx.out[1].e.a == '1JM394PQB47chcs49PCe3JETLDaBwzieBP' | secondOutput\n            //adds valid post to posts object\n\n\n            var paid = false\n            var paidFirstOutput = false;\n            var paidSecondOutput = false;\n            var paymentAmount = null;\n\n            paidFirstOutput = tx.out[1].e.a == '1ir1uFc24GBdtQC3HiCUfykfMYZQb9GfE';\n\n            if (paidFirstOutput) {\n              paymentAmount = tx.out[1].e.v;\n            }\n\n            if (tx.out[2]) {\n              paidSecondOutput = tx.out[2].e.a == '1ir1uFc24GBdtQC3HiCUfykfMYZQb9GfE';\n              if (paidSecondOutput) {\n                paymentAmount = tx.out[2].e.v;\n              }\n            }\n\n            var paid = paidFirstOutput || paidSecondOutput\n\n\n\n            if (donated) {\n              posts[tx.tx.h] = { tx: tx, reward: 0, initialVote: 0, voters: [] }\n\n            } else if (paid) {\n              posts[tx.tx.h] = { tx: tx, reward: 0, initialVote: paymentAmount, voters: [] }\n            }\n\n          }\n\n\n        } else if (tx.out[0].s3 == 'vote') {\n          valid = tx.out[0].s5;\n          if (valid) {\n            votes.push(tx);\n\n          }\n\n        }\n\n      }\n\n\n      return valid;\n    })\n\n    var bsvPrice = prices[0];\n\n\n\n    //loop through votes to assign them properly\n    for (let i = 0; i < votes.length; i++) {\n      //does vote have corresponding post?\n      var postTxid = votes[i].out[0].s4\n      if (posts[postTxid]) {\n        var correctAddress = posts[postTxid].tx.in[0].e.a == votes[i].out[1].e.a;\n        var correctAddressSecondOutput = false;\n        if (votes[i].out[2]) {\n          correctAddressSecondOutput = posts[postTxid].tx.in[0].e.a == votes[i].out[2].e.a;\n        }\n\n        correctAddress = correctAddress || correctAddressSecondOutput;\n        var voterId = votes[i].out[0].s5;\n        var prevVoters = posts[postTxid].voters;\n        var selfVote = voterId == posts[postTxid].tx.out[0].s7;\n\n        if (correctAddress && !prevVoters.includes(voterId) && !selfVote) {\n          //tabulating upvote total\n          correctAddressSecondOutput ? posts[postTxid].reward += votes[i].out[2].e.v : posts[postTxid].reward += votes[i].out[1].e.v;\n          prevVoters.push(voterId) // keeps track of unique voters\n\n        }\n      }\n    }\n\n\n\n    var postsArray = Object.values(posts)\n\n\n\n    var weeklyPosts = postsArray.slice().sort((a, b) => {\n      if (a.reward == b.reward) {\n\n        return a.tx.timestamp - b.tx.timestamp;\n      } else {\n        return b.voters.length - a.voters.length\n      }\n\n    });\n\n    var topPosts = weeklyPosts.filter(post => {\n      return post.tx.timestamp > Date.now() - 86400000;\n    })\n\n\n    while (topPosts.length > 10) {\n      topPosts.pop();\n    }\n\n    while (weeklyPosts.length > 15) {\n      weeklyPosts.pop();\n    }\n\n    var newPosts = postsArray.filter(post => {\n      return post.tx.timestamp > Date.now() - 86400000;\n    });\n\n\n\n\n\n    this.setState({\n      weeklyPosts, topPosts, newPosts, bsvPrice\n    })\n\n  }\n\n\n\n  loadPosts = () => {\n\n\n    var query = { \"v\": 3, \"q\": { \"find\": { \"out.s1\": \"13beK8bifnhuC8pawWvMrPCaWoTQi5LnZf\" }, \"limit\": 1000 } };\n    var b64 = btoa(JSON.stringify(query));\n    var url;\n    // if (this.state.dateRange == \"today\") {\n    //   url = \"https://chronos.bitdb.network/q/1P6o45vqLdo6X8HRCZk8XuDsniURmXqiXo/\" + b64;\n    // } else {\n    url = \"https://weekly.bitdb.network/q/12KQyEvGbHcJmavgmB1jDeTSJhJTzQ5ePg/\" + b64;\n\n    // }\n\n\n    var header = {\n      headers: { key: \"1EsRL44h3xNm8G4hT35ns3nNPicAHWAftc\" }\n    };\n\n    fetch(url, header).then(function (r) {\n      return r.json()\n    }).then((r) => {\n      var result = JSON.stringify(r, null, 2);\n      result = JSON.parse(result);\n\n      var transactions = result.t;\n\n\n      this.processPostsVotes(transactions);\n      this.setState({\n        transactions\n      })\n\n\n    })\n  }\n\n\n  createPostVoteSocket = () => {\n\n    if (socket) {\n      socket.close();\n    }\n\n    var socketQuery = { \"v\": 3, \"q\": { \"find\": { \"out.s1\": \"13beK8bifnhuC8pawWvMrPCaWoTQi5LnZf\", \"out.s2\": \"post/vote\" } } };\n\n    var b64 = btoa(JSON.stringify(socketQuery))\n    // Subscribe to EventSource\n    var url = \"https://chronos.bitdb.network/s/1P6o45vqLdo6X8HRCZk8XuDsniURmXqiXo/\" + b64;\n    socket = new EventSource(url)\n    // Handle new messages\n\n    socket.onmessage = (e) => {\n      console.log(new Date());\n\n      var transactions = JSON.parse(JSON.stringify(JSON.parse(e.data), null, 2)).data\n      if (transactions.length > 0) {\n        console.log(transactions)\n      }\n\n      var updatedTransactions = this.state.transactions.slice();\n      for (let i = 0; i < transactions.length; i++) {\n        //var inverseIndex = (transactions.length-1) - i;\n        updatedTransactions.unshift(transactions[i])\n      }\n\n      //var updatedTransactions = this.state.transactions.concat(transactions)\n      this.processPostsVotes(updatedTransactions)\n      this.setState({\n        transactions: updatedTransactions\n      });\n\n\n\n\n    }\n\n  }\n\n\n\n  hideLoginAlert = () => {\n    this.setState({\n      showLoginAlert: false\n    })\n  }\n\n  submitHandler = () => {\n    if (!this.state.loggedIn) {\n      this.setState({\n        showLoginAlert: true\n      })\n    } else if (this.state.posting == true) {\n      this.setState({\n        posting: false\n      })\n    }\n    else {\n      this.setState({\n        replying: false,\n        posting: true,\n        mode: 'new',\n\n      }\n      );\n\n    }\n  }\n\n\n  switchMode = mode => {\n    if (mode == 'top') {\n\n      this.setState({ mode: 'top' })\n    } else if (mode == 'new') {\n      this.setState({ mode: 'new' })\n    } else {\n      this.setState({ mode: 'weekly' })\n    }\n\n  }\n\n  loginHandler = () => {\n    this.setState({\n      loggedIn: true,\n      userId: localStorage.getItem('userId'),\n      username: localStorage.getItem('username'),\n      votePrice: localStorage.getItem('votePrice')\n    })\n    this.hideLoginAlert();\n  }\n\n  replyHandler = (path, username, address) => {\n    if (this.state.loggedIn) {\n      this.setState({\n        replying: true,\n        replyingTo: {\n          path,\n          username,\n          address\n        }\n      })\n    } else {\n      this.setState({ showLoginAlert: true });\n    }\n\n  }\n\n  hideReplyFormHandler = () => {\n    this.setState({\n      replying: false,\n      replyingTo: null\n    })\n  }\n\n  toggleCommentsHandler = (postTransaction) => {\n    if (this.state.showCommentsFor == postTransaction.tx.h) {\n      // this.commentsSocket = null;\n      this.setState({\n        showCommentsFor: null\n      })\n    } else {\n      //this.commentsSocket = null;\n      this.loadComments(postTransaction);\n\n\n\n    }\n\n\n  }\n\n  processComments = (transactions, postTransaction) => {\n    var transactions = transactions.filter(tx => {\n      var valid = false\n      if (tx.out[0].s6) {\n        valid = true\n      }\n\n\n      return valid;\n    })\n\n\n    var comments = {};\n    var maxDepth = 0;\n    var rootPath = postTransaction.tx.h;\n    var sendAddress = postTransaction.in[0].e.a\n\n\n    //loops to find comments of depth=1 and adds to comments object\n    for (let i = 0; i < transactions.length; i++) {\n      var correctSendAddress = (sendAddress == transactions[i].out[1].e.a) || (sendAddress == transactions[i].out[2].e.a);\n      var selfComment = transactions[i].out[0].s6 == postTransaction.out[0].s7;\n\n      if (transactions[i].out[0].s3.length / 64 > maxDepth) {\n        maxDepth = transactions[i].out[0].s3.length / 64;\n      }\n      if (transactions[i].out[0].s3 == postTransaction.tx.h && correctSendAddress && !selfComment) {\n\n        comments[transactions[i].tx.h] = {\n          tx: transactions[i],\n          comments: 0\n\n        }\n      }\n    }\n\n\n    if (maxDepth > 1) {\n      for (let i = 0; i < transactions.length; i++) {\n\n\n        if (transactions[i].out[0].s3.length == 64 * 2) {\n          var pathArray = chunkString(transactions[i].out[0].s3, 64);\n          if (comments[pathArray[1]]) {\n            var sendAddress = comments[pathArray[1]].tx.in[0].e.a\n            var correctSendAddress = (sendAddress == transactions[i].out[1].e.a) || (sendAddress == transactions[i].out[2].e.a)\n            var selfComment = comments[pathArray[1]].tx.out[0].s6 == transactions[i].out[0].s6;\n            if (correctSendAddress && !selfComment) {\n              comments[pathArray[1]][transactions[i].tx.h] = {\n                tx: transactions[i],\n                comments: 0\n              }\n              comments[pathArray[1]].comments += 1\n\n            }\n\n          }\n\n\n        }\n      }\n\n    }\n\n    if (maxDepth > 2) {\n      for (let i = 0; i < transactions.length; i++) {\n        if (transactions[i].out[0].s3.length == 64 * 3) {\n          var pathArray = chunkString(transactions[i].out[0].s3, 64);\n          if (comments[pathArray[1]]) {\n            if (comments[pathArray[1]][pathArray[2]]) {\n              var sendAddress = comments[pathArray[1]][pathArray[2]].tx.in[0].e.a\n              var correctSendAddress = (sendAddress == transactions[i].out[1].e.a) || (sendAddress == transactions[i].out[2].e.a)\n              var selfComment = comments[pathArray[1]][pathArray[2]].tx.out[0].s6 == transactions[i].out[0].s6;\n              if (correctSendAddress && !selfComment) {\n                comments[pathArray[1]][pathArray[2]][transactions[i].tx.h] = {\n                  tx: transactions[i],\n                  comments: 0\n                }\n                comments[pathArray[1]][pathArray[2]].comments += 1\n              }\n\n            }\n          }\n        }\n      }\n\n    }\n\n    if (maxDepth > 3) {\n      for (let i = 0; i < transactions.length; i++) {\n        if (transactions[i].out[0].s3.length == 64 * 4) {\n          var pathArray = chunkString(transactions[i].out[0].s3, 64);\n          if (comments[pathArray[1]]) {\n            if (comments[pathArray[1]][pathArray[2]]) {\n              if (comments[pathArray[1]][pathArray[2]][pathArray[3]]) {\n                var sendAddress = comments[pathArray[1]][pathArray[2]][pathArray[3]].tx.in[0].e.a\n                var correctSendAddress = (sendAddress == transactions[i].out[1].e.a) || (sendAddress == transactions[i].out[2].e.a)\n\n                var selfComment = comments[pathArray[1]][pathArray[2]][pathArray[3]].tx.out[0].s6 == transactions[i].out[0].s6;\n                if (correctSendAddress && !selfComment) {\n                  comments[pathArray[1]][pathArray[2]][pathArray[3]][transactions[i].tx.h] = {\n                    tx: transactions[i],\n                    comments: 0\n                  }\n                  comments[pathArray[1]][pathArray[2]][pathArray[3]].comments += 1\n                }\n              }\n            }\n          }\n        }\n      }\n\n    }\n    if (maxDepth > 4) {\n      for (let i = 0; i < transactions.length; i++) {\n        if (transactions[i].out[0].s3.length == 64 * 5) {\n          var pathArray = chunkString(transactions[i].out[0].s3, 64);\n          if (comments[pathArray[1]]) {\n            if (comments[pathArray[1]][pathArray[2]]) {\n              if (comments[pathArray[1]][pathArray[2]][pathArray[3]]) {\n                if (comments[pathArray[1]][pathArray[2]][pathArray[3]][pathArray[4]]) {\n                  var sendAddress = comments[pathArray[1]][pathArray[2]][pathArray[3]][pathArray[4]].tx.in[0].e.a\n                  var correctSendAddress = (sendAddress == transactions[i].out[1].e.a) || (sendAddress == transactions[i].out[2].e.a)\n\n                  var selfComment = comments[pathArray[1]][pathArray[2]][pathArray[3]][pathArray[4]].tx.out[0].s6 == transactions[i].out[0].s6;\n                  if (correctSendAddress && !selfComment) {\n                    comments[pathArray[1]][pathArray[2]][pathArray[3]][pathArray[4]][transactions[i].tx.h] = {\n                      tx: transactions[i],\n                      comments: 0\n                    }\n                    comments[pathArray[1]][pathArray[2]][pathArray[3]][pathArray[4]].comments += 1\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n\n    }\n\n\n    this.setState({\n      comments: Object.values(comments),\n      showCommentsFor: rootPath\n\n    })\n\n\n  }\n\n  loadComments = (postTransaction) => {\n    var rootPath = postTransaction.tx.h\n    var query = { \"v\": 3, \"q\": { \"find\": { \"out.s1\": \"13beK8bifnhuC8pawWvMrPCaWoTQi5LnZf\", \"out.s2\": \"comment\", \"out.s3\": { \"$regex\": \".*\" + rootPath + \".*\" } } } };\n    var b64 = btoa(JSON.stringify(query));\n    var url = \"https://weekly.bitdb.network/q/12KQyEvGbHcJmavgmB1jDeTSJhJTzQ5ePg/\" + b64;\n\n\n    var header = {\n      headers: { key: \"1EsRL44h3xNm8G4hT35ns3nNPicAHWAftc\" }\n    };\n\n    fetch(url, header).then(function (r) {\n      return r.json()\n    }).then((r) => {\n      var result = JSON.stringify(r, null, 2);\n      result = JSON.parse(result);\n\n      var transactions = result.t;\n      this.processComments(transactions, postTransaction);\n\n      this.setState({\n        commentsTransactions: transactions,\n      }\n        // , () => this.createCommentsSocket(postTransaction)\n      )\n\n\n\n    })\n  }\n\n  createCommentsSocket = (postTransaction) => {\n\n    var rootPath = postTransaction.tx.h\n    var socketQuery = { \"v\": 3, \"q\": { \"find\": { \"out.s1\": \"13beK8bifnhuC8pawWvMrPCaWoTQi5LnZf\", \"out.s2\": \"comment\", \"out.s3\": { \"$regex\": \".*\" + rootPath + \".*\" } } } };\n\n    var b64 = btoa(JSON.stringify(socketQuery))\n    // Subscribe to EventSource\n    var url = \"https://chronos.bitdb.network/s/1P6o45vqLdo6X8HRCZk8XuDsniURmXqiXo/\" + b64;\n    this.commentsSocket = new EventSource(url)\n    // Handle new messages\n\n    this.commentsSocket.onmessage = (e) => {\n\n      var transactions = JSON.parse(JSON.stringify(JSON.parse(e.data), null, 2)).data\n\n      var updatedTransactions = this.state.commentsTransactions.concat(transactions)\n      if (this.state.showCommentsFor == postTransaction.tx.h) {\n        this.processComments(updatedTransactions, postTransaction)\n        this.setState({\n          commentsTransactions: updatedTransactions\n        });\n      }\n\n\n\n\n    }\n\n  }\n\n\n\n\n  votePriceChangeHandler = () => {\n    this.state.votePrice = localStorage.getItem('votePrice');\n    this.setState({\n      showLoginAlert: false,\n      changingVotePrice: false\n    })\n  }\n\n  mobileVoteHandler = (post) => {\n    this.setState({\n      showVoteDialogue: true,\n      showDropdown: false,\n      replying: false,\n      votingOn: post.tx\n    })\n  }\n\n  hideUIElements = () => {\n    this.setState({\n      showVoteDialogue: false,\n      votingOn: null\n    })\n  }\n\n  reload = () => {\n    console.log('reload');\n    this.loadPosts();\n    this.createPostVoteSocket();\n  }\n\n\n  render() {\n    var postElements = [];\n    var posts = [];\n    var top = this.state.mode == 'top';\n    var newMode = this.state.mode == 'new';\n    var weekly = this.state.mode == 'weekly';\n    var today = !weekly;\n    var showVoteDialogue = this.state.showVoteDialogue;\n    var price = this.state.bsvPrice;\n\n\n    if (top) {\n      posts = this.state.topPosts\n    } else if (newMode) {\n      posts = this.state.newPosts\n    } else {\n      posts = this.state.weeklyPosts\n    }\n\n\n\n\n\n\n    for (let i = 0; i < posts.length; i++) {\n      postElements.push(<Post bsvPrice={this.state.bsvPrice} key={posts[i].tx.tx.h} voteHandler={this.mobileVoteHandler} defaultVotePrice={this.state.votePrice} loggedIn={this.state.loggedIn} postData={posts[i]} comments={this.state.comments} showCommentsFor={this.state.showCommentsFor} toggleComments={this.toggleCommentsHandler} replyHandler={this.replyHandler} userId={this.state.userId} />)\n\n    }\n\n    var dropdown = (\n      <div className=\"dropdown-container\">\n        <div class=\"dropdown\">\n          <div class=\"header-button\" onClick={() => this.setState({ showLoginAlert: true, changingUsername: true, changingVotePrice: false, showDropdown: false })}>\n            <div class=\"header-button-text dropdown-text\">change username</div>\n          </div>\n          <div class=\"header-button dropdown-button\">\n            <div class=\"header-button-text dropdown-text\" onClick={() => this.setState({ showLoginAlert: true, changingUsername: false, showDropdown: false, changingVotePrice: true })}>change vote price<br /></div>\n          </div>\n        </div>\n      </div>\n\n\n    )\n\n    var headerRight;\n    var submitImageURL = 'https://uploads-ssl.webflow.com/5cb9fe80c114993f85aebed2/5cfd835e1c26ab620b063cea_bsvnews%20plus%20icon.png'\n    var submitCancelImageURL = 'https://uploads-ssl.webflow.com/5cb9fe80c114993f85aebed2/5d028a3d1a6395bd081e5a2a_submit%20cance.png'\n    if (this.state.loggedIn) {\n      headerRight = (\n        <div className=\"header-right\" >\n          <div class=\"header-button header-button-right m-header-button\" onClick={this.submitHandler}><img\n            src={this.state.posting ? submitCancelImageURL : submitImageURL}\n            width=\"14\" height=\"14\" alt=\"\" class=\"image-2\" /></div>\n          <div class=\"header-button header-button-right m-header-button\" onClick={this.reload}><img\n            src=\"https://uploads-ssl.webflow.com/5cb9fe80c114993f85aebed2/5cfd8266982a747870f23408_bsvnews%20refresh.png\"\n            width=\"14\" height=\"14\" alt=\"\" class=\"image\" /></div>\n          <div className=\"header-button header-button-right\" onClick={() => this.setState({ showDropdown: !this.state.showDropdown })}>\n            <div className=\"header-button-text\" >{this.state.username}</div>\n            <div className=\"header-button-text button-symbol\">{this.state.showDropdown ? '▼' : '▶'}</div>\n          </div>\n\n        </div>\n\n      );\n    } else {\n      headerRight = (\n        <div className=\"header-right\">\n          <div className=\"header-button header-button-right\" onClick={() => this.setState({ showLoginAlert: true })}>\n            <div className=\"header-button-text\" >login</div>\n          </div>\n        </div>\n      )\n    }\n\n\n\n\n\n\n\n    return (\n      <div>\n        {/* This site was created in Webflow. http://www.webflow.com */}\n        {/* Last Published: Sat Apr 20 2019 23:09:33 GMT+0000 (UTC) */}\n        <meta charSet=\"utf-8\" />\n        <title>bsvnews</title>\n        <meta content=\"width=device-width, initial-scale=1, maximum-scale=1,user-scalable=0\" name=\"viewport\" />\n        <meta content=\"Webflow\" name=\"generator\" />\n        {/*[if lt IE 9]><![endif]*/}\n        <Helmet>\n          <title>bsvnews</title>\n          <script src=\"https://tonicpow.com/tonic.js\"></script>\n          <script src=\"https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js\" type=\"text/javascript\"></script>\n          <script src='https://bico.media/65a47b6916ef22945ac1f7637721de0e2187e1abaa81016a7c6d878c50426b62'\n            type=\"text/javascript\"></script>\n          <script src='https://bico.media/b7d90d9da89fabfe9000ece46b453bfabce9a733e1bb97b60445b01443d1a117'\n            type=\"text/javascript\"></script>\n        </Helmet>\n\n\n        <div className=\"container w-container\" style={{ paddingBottom: 10 }}>\n          <div className=\"header\">\n            <div className=\"header-left\" >\n              <div className=\"title\">BSV News</div>\n              <div className='button-container'>\n                {today ? <div className=\"header-button\" onClick={top ? () => this.switchMode('new') : () => this.switchMode('top')}> <div className=\"header-button-text\"  >{this.state.mode == 'top' ? 'new' : 'top'} </div> </div> : null}\n                <div className=\"header-button\" onClick={this.submitHandler}> <div className=\"header-button-text\" >{this.state.posting ? \" X \" : \"submit\"}</div></div>\n                <div className=\"header-button\" onClick={this.reload}> <div className=\"header-button-text\" >reload</div></div>\n                <div className=\"header-button\" onClick={weekly ? () => this.switchMode('top') : () => this.switchMode('weekly')}> <div className=\"header-button-text\" >{this.state.mode == 'weekly' ? 'today' : 'weekly'}</div></div>\n\n              </div>\n            </div>\n\n            {headerRight}\n\n\n          </div>\n          {this.state.showDropdown ? dropdown : null}\n\n          {this.state.showLoginAlert ? <LoginAlert votePriceChangeHandler={this.votePriceChangeHandler} xHandler={this.hideLoginAlert} loginHandler={this.loginHandler} changingUsername={this.state.changingUsername} changingVotePrice={this.state.changingVotePrice} /> : null}\n          {this.state.posting ? <PostForm username={this.state.username} userId={this.state.userId} finishSubmitHandler={this.submitHandler} /> : null}\n\n          <div className=\"posts\">\n            {postElements}\n          </div>\n\n          <div className='metadata' style={{ width: '100%', padding: 10, paddingBottom: 0, paddingRight: 20, display: 'flex', justifyContent: 'flex-end' }}> disable scale  Created by $canyouhandleme</div>\n\n        </div>\n        <div className=\"tonic-pow\">\n          <div style={{ margin: 'auto' }} class=\"tonic\" data-address=\"1BvrRxhXAVsZKyMnBT1STkXXVnsXrm7BNm\"></div>\n        </div>\n        {this.state.replying ? <ReplyForm hideReply={this.hideReplyFormHandler} replyingTo={this.state.replyingTo} username={this.state.username} userId={this.state.userId} /> : null}\n        {showVoteDialogue ? <MobileVoteAlert xHandler={this.hideUIElements} votePrice={this.state.votePrice} votingOn={this.state.votingOn} userId={this.state.userId} /> : null}\n        <SegmentedController switchMode={this.switchMode} top={top} newMode={newMode} weekly={weekly} />\n\n      </div>\n\n\n\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}