(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{20:function(e,t,a){e.exports=a(37)},25:function(e,t,a){},26:function(e,t,a){},37:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),s=a(17),r=a.n(s),i=(a(25),a(2)),l=a(3),c=a(5),m=a(4),d=a(6),u=(a(26),a(13));function h(e){var t=Object(u.a)({},e.commentTree.tx),a=t.out[0].s3+t.tx.h,n=t.out[0].s5,s=t.in[0].e.a,r=a.length/64<6&&e.userId!=t.out[0].s6,i=Object(u.a)({},e.commentTree);delete i.tx,delete i.comments;var l=[];(i=Object.values(i)).sort(function(e,t){return t.comments-e.comments});for(var c=0;c<i.length;c++)l.push(o.a.createElement(h,{replyHandler:e.replyHandler,userId:e.userId,commentTree:i[c]}));return o.a.createElement("div",{className:"comment"},o.a.createElement("div",{className:"comment-metadata"},o.a.createElement("div",{className:"metadata"},t.out[0].s5),o.a.createElement("div",{className:"metadata"},t.timeago),r?o.a.createElement("div",{className:"metadata metadata-button",onClick:function(){return e.replyHandler(a,n,s)}}," reply"):null),o.a.createElement("div",{className:"comment-content"},decodeURIComponent(t.out[0].s4)),l)}var p=a(18),g=a.n(p);function v(e){var t=e.comments.slice();t.sort(function(e,t){return t.comments-e.comments});var a=[];if(e.comments)for(var n=0;n<e.comments.length;n++)a.push(o.a.createElement(h,{replyHandler:e.replyHandler,userId:e.userId,commentTree:t[n]}));return o.a.createElement("div",{className:"comments-container"},a,0==a.length?"No comments!":null)}var f=a(10).default;function b(e){for(var t="",a=0;a<e.length;a++)t+=""+e.charCodeAt(a).toString(16);return t}var E=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).toggleCommentsHandler=function(){a.setState({showComments:!a.state.showComments})},a.toggleTipHandler=function(){a.props.loggedIn?a.setState({tip:!a.state.tip}):a.props.replyHandler()},a.editPriceHandler=function(){console.log(),a.setState({tip:!1,votePrice:document.getElementsByClassName("price-field")[0].value})},a.state={showComments:!1,tip:!1,votePrice:localStorage.getItem("votePrice")},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e,t=this,a=decodeURI(this.props.postData.tx.out[0].s5),n=decodeURIComponent(this.props.postData.tx.out[0].s4),s=this.props.postData.tx.out[0].s6,r=this.props.showCommentsFor==this.props.postData.tx.tx.h,i=this.props.postData.tx.out[0].s7==this.props.userId,l=this.props.postData.voters.includes(this.props.userId),c=!i&&!l;e=this.props.postData.tx.timeago?this.props.postData.tx.timeago:function(e){var t=Date.now()-e;return t<6e4?Math.round(t/1e3)+" seconds ago":t<36e5?Math.round(t/6e4)+" minutes ago":t<864e5?Math.round(t/36e5)+" hours ago":t<2592e6?Math.round(t/864e5)+" days ago":t<31536e6?Math.round(t/2592e6)+" months ago":Math.round(t/31536e6)+" years ago"}(this.props.postData.tx.timestamp);var m=this.props.postData.voters.length+1,d=this.props.postData.reward,u=200*JSON.parse(d/1e8),h=(Math.round(100*u)/100).toString(),p=o.a.createElement("div",{style:{height:50}}),g=this.props.windowWidth<480;console.log(this.props.defaultVotePrice),!this.props.loggedIn||this.state.tip||g?this.props.loggedIn&&this.state.tip&&(p=o.a.createElement("div",{class:"price-edit-form-block w-form"},o.a.createElement("form",{id:"email-form-4",name:"email-form-4","data-name":"Email Form 4",class:"form-3"},o.a.createElement("div",{class:"post-price-container"},o.a.createElement("input",{type:"text",class:"text-field price-field w-input",maxlength:"256",name:"name-2","data-name":"Name 2",placeholder:"Vote Price (USD)",id:"name-2"}),o.a.createElement("div",{class:"header-button",onClick:this.editPriceHandler},o.a.createElement("div",{class:"header-button-text dropdown-text"},"set price")))))):p=o.a.createElement("div",{style:{width:140}},o.a.createElement(f,{label:"vote",outputs:[{amount:0,currency:"BSV",type:"SCRIPT",script:"OP_RETURN "+b("13beK8bifnhuC8pawWvMrPCaWoTQi5LnZf")+" "+b("post/vote")+" "+b("vote")+" "+b(this.props.postData.tx.tx.h)+" "+b(this.props.userId)},{to:this.props.postData.tx.in[0].e.a,amount:this.props.defaultVotePrice,currency:"USD"}]})),1==h.length&&(h+=".00");var E,w=o.a.createElement("div",{className:"post-button",onClick:function(){return t.props.replyHandler(t.props.postData.tx.tx.h,s,t.props.postData.tx.in[0].e.a)}},o.a.createElement("div",{className:"metadata post-button-text"},"reply")),y=o.a.createElement("div",{className:"post-button",onClick:this.toggleTipHandler},o.a.createElement("div",{className:"metadata post-button-text",onClick:this.toggleTipHandler},this.state.tip?"cancel":"edit price")),C=o.a.createElement("div",{className:"post-button"},o.a.createElement("div",{className:"metadata post-button-text"},"vote"));return E=g?C:y,o.a.createElement("div",{className:"post-container"},o.a.createElement("div",{className:"post"},o.a.createElement("div",{style:{width:"100%"}},o.a.createElement("div",{className:"post-data"},o.a.createElement("div",{className:"reward"},"$",h," ",o.a.createElement("strong",null)),o.a.createElement("div",{className:"post-title",style:{cursor:"pointer"},onClick:function(){return window.open(a)}},n)),o.a.createElement("div",{className:"post-metadata"},o.a.createElement("div",{className:"div-block-5"},o.a.createElement("div",{className:"metadata"}," (",m," vote",1==m?null:"s",")"),o.a.createElement("div",{className:"metadata"}," ",e),o.a.createElement("div",{className:"metadata"},s),o.a.createElement("div",{className:"metadata",style:{cursor:"pointer"},onClick:function(){return t.props.toggleComments(t.props.postData.tx)}}," ",r?"comments \u25bc":"comments \u25b6")),o.a.createElement("div",{className:"div-block-5"},i?null:w,i||l?null:E))),c||this.state.tip?p:o.a.createElement("div",{className:"hide-mobile"},o.a.createElement("div",{className:"hide-mobile",style:{height:50,width:120,display:"flex",alignItems:"center",justifyContent:"center"}},l?"Voted! \ud83d\uddf3\ufe0f":null))),r?o.a.createElement(v,{replyHandler:this.props.replyHandler,userId:this.props.userId,comments:this.props.comments}):null)}}]),t}(o.a.Component),w=g()(E),y=(a(16),a(10).default);Number.prototype.countDecimals=function(){return Math.floor(this.valueOf())===this.valueOf()?0:this.toString().split(".")[1].length||0};var C=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).onPaymentHandler=function(e){""!=a.state.input&&(localStorage.setItem("userId",e.userId.toString(),{path:"/"}),localStorage.setItem("username",a.state.input,{path:"/"}),a.props.changingUsername||a.props.changingUsername||localStorage.setItem("votePrice",a.state.priceInput),a.props.loginHandler()),console.log(e.userId),console.log(e)},a.inputOnChangeHandler=function(e){a.setState({input:e.target.value})},a.priceInputChangeHandler=function(e){var t=!1;if(!isNaN(e.target.value)){var n=JSON.parse(e.target.value);n.countDecimals()<3&n>=.01&&(t=!0)}a.setState({priceInput:e.target.value,validPrice:t})},a.votePriceChangeHandler=function(){localStorage.setItem("votePrice",a.state.priceInput),a.props.votePriceChangeHandler()},a.state={input:"",priceInput:"",validPrice:!1},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e;console.log(this.props.changingUsername);var t,a,n,s=!this.props.changingUsername&!this.props.changingVotePrice,r=this.props.changingUsername,i=this.props.changingVotePrice,l=i&&this.state.validPrice&&""!=this.state.priceInput;t=s?!(this.state.validPrice&&""!==this.state.input):!(r&&""!==this.state.input),e=r?"1":"0.01",a=s?230:r?140:150,console.log(a),n=s?"Login":r?"Change Username":"Change Vote Price";var c="login-info",m="*On bsvnews, you can upvote other users' content. Set the default amount of money you would like to give them for each upvote. You can change this later. Your default price must be $0.01 or higher.";(s||i)&&0==this.state.validPrice&""!=this.state.priceInput&&(c+=" login-info-red",m="*Please enter a valid vote price (ex. 0.25).");var d,u=o.a.createElement("div",{class:c},m),h=o.a.createElement("input",{type:"text",class:"login-username w-input",maxLength:"15",name:"name-2","data-name":"Name 2",placeholder:"Desired username",id:"name-2",onChange:this.inputOnChangeHandler});if(s)d=o.a.createElement("div",{className:"vote-price-container"},o.a.createElement("input",{type:"text",onChange:this.priceInputChangeHandler,class:"login-username w-input",maxlength:"5",name:"name-2","data-name":"Name 2",placeholder:"Default vote price (USD)",id:"name-2"}));else if(i){var p;p=this.state.validPrice?"header-button":"header-button button-greyed",d=o.a.createElement("div",{className:"vote-price-container"},o.a.createElement("input",{type:"text",onChange:this.priceInputChangeHandler,class:"login-username w-input vote-price",maxlength:"5",name:"name-2","data-name":"Name 2",placeholder:"Default vote price (USD)",id:"name-2"}),o.a.createElement("div",{className:p,onClick:l?this.votePriceChangeHandler:function(){return null}},o.a.createElement("div",{className:"header-button-text dropdown-text"},"set price")))}return o.a.createElement("div",{class:"login-container"},o.a.createElement("div",{class:"login-alert w-form",style:{height:a}},o.a.createElement("form",{id:"email-form-3",name:"email-form-3","data-name":"Email Form 3",class:"login-form"},o.a.createElement("div",{class:"x-container"},o.a.createElement("div",{className:"div-block-4"},o.a.createElement("div",{class:"login-title"},n)),o.a.createElement("div",{class:"login-cancel",onClick:this.props.xHandler},"X")),o.a.createElement("form",{id:"email-form-3",name:"email-form-3","data-name":"Email Form 3",class:"login-form"},o.a.createElement("div",{class:"inputs-container"},s||r?h:null,s||i?[d,u]:null)),s||this.props.changingUsername?o.a.createElement("div",{className:"mb-container"},o.a.createElement(y,{to:"112",label:"submit",amount:e,currency:"USD",onPayment:this.onPaymentHandler,disabled:t})):null)))}}]),t}(o.a.Component),x=a(10).default,N=function(e){for(var t="",a=0;a<e.length;a++)t+=""+e.charCodeAt(a).toString(16);return t},P=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).inputChangeHandler=function(e){a.setState({reply:e.target.value})},a.state={reply:""},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"new-reply-container"},o.a.createElement("div",{className:" w-form"},o.a.createElement("form",{id:"email-form-2",name:"email-form-2","data-name":"Email Form 2",className:"m-vote-price-form"},o.a.createElement("div",{className:"div-block"},o.a.createElement("div",null,"Replying to: ",this.props.replyingTo.username),o.a.createElement("div",{className:"login-cancel",onClick:this.props.hideReply},"X")),o.a.createElement("textarea",{onChange:this.inputChangeHandler,id:"field",name:"field",placeholder:"Example Text",maxLength:5e3,className:"textarea w-input",defaultValue:""}),o.a.createElement(x,{outputs:[{amount:0,currency:"BSV",type:"SCRIPT",script:"OP_RETURN "+N("13beK8bifnhuC8pawWvMrPCaWoTQi5LnZf")+" "+N("comment")+" "+N(this.props.replyingTo.path)+" "+N(encodeURIComponent(this.state.reply))+" "+N(this.props.username)+" "+N(this.props.userId)},{to:this.props.replyingTo.address,amount:"0.01",currency:"USD"}],onPayment:this.props.hideReply}))))}}]),t}(o.a.Component),S=a(12),I=a(10).default;function H(e){for(var t="",a=0;a<e.length;a++)t+=""+e.charCodeAt(a).toString(16);return t}Number.prototype.countDecimals=function(){return Math.floor(this.valueOf())===this.valueOf()?0:this.toString().split(".")[1].length||0};var k=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).urlChangeHandler=function(e){a.setState({url:e.target.value})},a.titleChangeHandler=function(e){a.setState({title:e.target.value})},a.postPriceChangeHandler=function(e){var t=!1;if(!isNaN(e.target.value)){var n=JSON.parse(e.target.value);n.countDecimals()<3&n>=.01&&(t=!0)}a.setState({postPrice:e.target.value,validPrice:t})},a.defaultPriceHandler=function(){document.getElementsByClassName("price-field")[0].value=localStorage.getItem("votePrice"),a.setState({validPrice:!0,postPrice:localStorage.getItem("votePrice")})},a.state={url:"",title:"",opReturn:"",postPrice:"",validPrice:!1},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=H("13beK8bifnhuC8pawWvMrPCaWoTQi5LnZf")+" "+H("post/vote")+" "+H("post")+" "+H(encodeURIComponent(this.state.title))+" "+H(encodeURI(this.state.url))+" "+H(this.props.username)+" "+H(this.props.userId),t=null;return this.state.validPrice&&(t=this.state.postPrice),o.a.createElement("div",{className:"new-post w-form"},o.a.createElement("form",{id:"email-form",name:"email-form","data-name":"Email Form",className:"form"},o.a.createElement("input",{onChange:this.titleChangeHandler,type:"text",className:"text-field w-input",maxLength:256,name:"name","data-name":"Name",placeholder:"Post Title",id:"name"}),o.a.createElement("input",{onChange:this.urlChangeHandler,type:"email",className:"text-field w-input",maxLength:256,name:"email","data-name":"Email",placeholder:"Post URL",id:"email",required:!0}),o.a.createElement("div",{class:"post-price-container"},o.a.createElement("input",Object(S.a)({type:"text",id:"postPriceInput",onChange:this.postPriceChangeHandler,class:"text-field price-field w-input",maxlength:"256",name:"name-2","data-name":"Name 2",placeholder:"Vote Price (USD)"},"id","name-2")),o.a.createElement("div",{class:"header-button",onClick:this.defaultPriceHandler},o.a.createElement("div",{class:"header-button-text dropdown-text"},"default price"))),o.a.createElement("div",{className:"text-block-7"},"*Enter in the price of your initial vote on your own post. You can think of it as paying for a form of advertisement as your post may get noticed more. Must be more than $0.01."),o.a.createElement(I,{outputs:[{amount:0,currency:"BSV",type:"SCRIPT",script:"OP_RETURN "+e},{to:"1JM394PQB47chcs49PCe3JETLDaBwzieBP",amount:t,currency:"USD"}],label:"submit",disabled:!this.state.validPrice,onPayment:this.props.finishSubmitHandler})))}}]),t}(o.a.Component),O=a(19);a(10).default;function D(e,t){for(var a,n=Math.ceil(e.length/t),o=new Array(n),s=0;s<n;s++)a=s*t,o[s]=e.substring(a,a+t);return o}var R=function(e){function t(e){var a;Object(i.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).processPostsVotes=function(e){var t={},n=[];e=e.filter(function(e){var a,o=!1;if(e.out[0].s3)if("post"==e.out[0].s3){if(o=e.out[0].s7&&(a=decodeURI(e.out[0].s5),!!new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(a)||decodeURI(e.out[0].s5).includes("medium"))){var s=!1;e.out[2]&&(s="1JM394PQB47chcs49PCe3JETLDaBwzieBP"==e.out[2].e.a),"1JM394PQB47chcs49PCe3JETLDaBwzieBP"==e.out[1].e.a|s&&(t[e.tx.h]={tx:e,reward:0,voters:[]})}}else"vote"==e.out[0].s3&&(o=e.out[0].s5)&&n.push(e);return o});console.log("votes",n),console.log(t);for(var o=0;o<n.length;o++){var s=n[o].out[0].s4;if(t[s]){var r=t[s].tx.in[0].e.a==n[o].out[1].e.a,i=!1;n[o].out[2]&&(i=t[s].tx.in[0].e.a==n[o].out[2].e.a),r=r||i;var l=n[o].out[0].s5,c=t[s].voters,m=l==t[s].tx.out[0].s7;!r||c.includes(l)||m||(t[s].reward+=i?n[o].out[2].e.v:n[o].out[1].e.v,c.push(l))}}var d=Object.values(t);a.setState({posts:d})},a.loadPosts=function(){var e,t=btoa(JSON.stringify({v:3,q:{find:{"out.s1":"13beK8bifnhuC8pawWvMrPCaWoTQi5LnZf","out.s2":"post/vote"},limit:1e3}}));e="today"==a.state.dateRange?"https://chronos.bitdb.network/q/1P6o45vqLdo6X8HRCZk8XuDsniURmXqiXo/"+t:"https://weekly.bitdb.network/q/12KQyEvGbHcJmavgmB1jDeTSJhJTzQ5ePg/"+t;fetch(e,{headers:{key:"1EsRL44h3xNm8G4hT35ns3nNPicAHWAftc"}}).then(function(e){return e.json()}).then(function(e){var t=JSON.stringify(e,null,2),n=(t=JSON.parse(t)).t;console.log(n),a.processPostsVotes(n),a.setState({transactions:n})})},a.createPostVoteSocket=function(){var e=btoa(JSON.stringify({v:3,q:{find:{"out.s1":"13beK8bifnhuC8pawWvMrPCaWoTQi5LnZf","out.s2":"post/vote"}}}));new EventSource("https://chronos.bitdb.network/s/1P6o45vqLdo6X8HRCZk8XuDsniURmXqiXo/"+e).onmessage=function(e){JSON.parse(JSON.stringify(JSON.parse(e.data),null,2)).data.length>0&&a.loadPosts()}},a.hideLoginAlert=function(){a.setState({showLoginAlert:!1})},a.submitHandler=function(){a.state.loggedIn?1==a.state.posting?a.setState({posting:!1}):a.setState({replying:!1,posting:!0,mode:"new",dateRange:"today"},a.loadPosts):a.setState({showLoginAlert:!0})},a.switchMode=function(){a.loadPosts(),"top"==a.state.mode?a.setState({mode:"new"}):a.setState({mode:"top"})},a.loginHandler=function(){a.setState({loggedIn:!0,userId:localStorage.getItem("userId"),username:localStorage.getItem("username"),votePrice:localStorage.getItem("votePrice")}),a.hideLoginAlert()},a.replyHandler=function(e,t,n){a.state.loggedIn?a.setState({replying:!0,replyingTo:{path:e,username:t,address:n}}):a.setState({showLoginAlert:!0})},a.hideReplyFormHandler=function(){a.setState({replying:!1,replyingTo:null})},a.toggleCommentsHandler=function(e){a.state.showCommentsFor==e.tx.h?a.setState({showCommentsFor:null}):a.loadComments(e)},a.processComments=function(e,t){e=e.filter(function(e){var t=!1;return e.out[0].s6&&(t=!0),t});for(var n={},o=0,s=t.tx.h,r=t.in[0].e.a,i=0;i<e.length;i++){var l=r==e[i].out[1].e.a||r==e[i].out[2].e.a,c=e[i].out[0].s6==t.out[0].s7;e[i].out[0].s3.length/64>o&&(o=e[i].out[0].s3.length/64),e[i].out[0].s3==t.tx.h&&l&&!c&&(n[e[i].tx.h]={tx:e[i],comments:0})}if(o>1)for(var m=0;m<e.length;m++){if(128==e[m].out[0].s3.length)if(n[(p=D(e[m].out[0].s3,64))[1]]){l=(r=n[p[1]].tx.in[0].e.a)==e[m].out[1].e.a||r==e[m].out[2].e.a,c=n[p[1]].tx.out[0].s6==e[m].out[0].s6;l&&!c&&(n[p[1]][e[m].tx.h]={tx:e[m],comments:0},n[p[1]].comments+=1)}}if(o>2)for(var d=0;d<e.length;d++){if(192==e[d].out[0].s3.length)if(n[(p=D(e[d].out[0].s3,64))[1]]&&n[p[1]][p[2]]){l=(r=n[p[1]][p[2]].tx.in[0].e.a)==e[d].out[1].e.a||r==e[d].out[2].e.a,c=n[p[1]][p[2]].tx.out[0].s6==e[d].out[0].s6;l&&!c&&(n[p[1]][p[2]][e[d].tx.h]={tx:e[d],comments:0},n[p[1]][p[2]].comments+=1)}}if(o>3)for(var u=0;u<e.length;u++){if(256==e[u].out[0].s3.length)if(n[(p=D(e[u].out[0].s3,64))[1]]&&n[p[1]][p[2]]&&n[p[1]][p[2]][p[3]]){l=(r=n[p[1]][p[2]][p[3]].tx.in[0].e.a)==e[u].out[1].e.a||r==e[u].out[2].e.a,c=n[p[1]][p[2]][p[3]].tx.out[0].s6==e[u].out[0].s6;l&&!c&&(n[p[1]][p[2]][p[3]][e[u].tx.h]={tx:e[u],comments:0},n[p[1]][p[2]][p[3]].comments+=1)}}if(o>4)for(var h=0;h<e.length;h++){var p;if(320==e[h].out[0].s3.length)if(n[(p=D(e[h].out[0].s3,64))[1]]&&n[p[1]][p[2]]&&n[p[1]][p[2]][p[3]]&&n[p[1]][p[2]][p[3]][p[4]]){l=(r=n[p[1]][p[2]][p[3]][p[4]].tx.in[0].e.a)==e[h].out[1].e.a||r==e[h].out[2].e.a,c=n[p[1]][p[2]][p[3]][p[4]].tx.out[0].s6==e[h].out[0].s6;l&&!c&&(n[p[1]][p[2]][p[3]][p[4]][e[h].tx.h]={tx:e[h],comments:0},n[p[1]][p[2]][p[3]][p[4]].comments+=1)}}a.setState({comments:Object.values(n),showCommentsFor:s})},a.loadComments=function(e){var t={v:3,q:{find:{"out.s1":"13beK8bifnhuC8pawWvMrPCaWoTQi5LnZf","out.s2":"comment","out.s3":{$regex:".*"+e.tx.h+".*"}}}},n=btoa(JSON.stringify(t));fetch("https://weekly.bitdb.network/q/12KQyEvGbHcJmavgmB1jDeTSJhJTzQ5ePg/"+n,{headers:{key:"1EsRL44h3xNm8G4hT35ns3nNPicAHWAftc"}}).then(function(e){return e.json()}).then(function(t){var n=JSON.stringify(t,null,2),o=(n=JSON.parse(n)).t;a.processComments(o,e),a.setState({commentsTransactions:o})})},a.createCommentsSocket=function(e){var t={v:3,q:{find:{"out.s1":"13beK8bifnhuC8pawWvMrPCaWoTQi5LnZf","out.s2":"comment","out.s3":{$regex:".*"+e.tx.h+".*"}}}},n="https://chronos.bitdb.network/s/1P6o45vqLdo6X8HRCZk8XuDsniURmXqiXo/"+btoa(JSON.stringify(t));a.commentsSocket=new EventSource(n),a.commentsSocket.onmessage=function(t){var n=JSON.parse(JSON.stringify(JSON.parse(t.data),null,2)).data,o=a.state.commentsTransactions.concat(n);a.state.showCommentsFor==e.tx.h&&(a.processComments(o,e),a.setState({commentsTransactions:o}))}},a.toggleDateRange=function(){var e;e="today"==a.state.dateRange?"weekly":"today",a.setState({mode:"top",dateRange:e},function(){a.loadPosts()})},a.votePriceChangeHandler=function(){a.state.votePrice=localStorage.getItem("votePrice"),a.setState({showLoginAlert:!1,changingVotePrice:!1})};var n=localStorage.getItem("username"),o=localStorage.getItem("userId"),s=localStorage.getItem("votePrice");console.log(o,n);var r={showLoginAlert:!1,showDropdown:!1,changingUsername:!1,changingVotePrice:!1,defaultVotePrice:null,loggedIn:!1,replying:!1,replyingTo:null,posting:!1,showCommentsFor:null,commentsTransactions:null,comments:null,mode:"top",dateRange:"today",userId:null,username:null,transactions:[],posts:[]};return n&&o&&s&&(r.username=n,r.userId=o,r.votePrice=s,r.loggedIn=!0),a.state=r,a.loadPosts(),a.createPostVoteSocket(),a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e,t=this,a=[],n=this.state.posts.slice();if(e="today"==this.state.dateRange?10:15,"top"==this.state.mode)for(n.sort(function(e,t){return e.reward==t.reward?e.tx.timestamp-t.tx.timestamp:t.voters.length-e.voters.length});n.length>e;)n.pop();else n.sort(function(e,t){return t.tx.timestamp-e.tx.timestamp});for(var s=0;s<n.length;s++)a.push(o.a.createElement(w,{defaultVotePrice:this.state.votePrice,loggedIn:this.state.loggedIn,postData:n[s],comments:this.state.comments,showCommentsFor:this.state.showCommentsFor,toggleComments:this.toggleCommentsHandler,replyHandler:this.replyHandler,userId:this.state.userId}));var r,i=o.a.createElement("div",{className:"dropdown-container"},o.a.createElement("div",{class:"dropdown"},o.a.createElement("div",{class:"header-button",onClick:function(){return t.setState({showLoginAlert:!0,changingUsername:!0,changingVotePrice:!1,showDropdown:!1})}},o.a.createElement("div",{class:"header-button-text dropdown-text"},"change username")),o.a.createElement("div",{class:"header-button dropdown-button"},o.a.createElement("div",{class:"header-button-text dropdown-text",onClick:function(){return t.setState({showLoginAlert:!0,changingUsername:!1,showDropdown:!1,changingVotePrice:!0})}},"change vote price",o.a.createElement("br",null)))));return r=this.state.loggedIn?o.a.createElement("div",{className:"header-right"},o.a.createElement("div",{class:"header-button header-button-right m-header-button",onClick:this.submitHandler},o.a.createElement("img",{src:"https://uploads-ssl.webflow.com/5cb9fe80c114993f85aebed2/5cfd835e1c26ab620b063cea_bsvnews%20plus%20icon.png",width:"14",height:"14",alt:"",class:"image-2"})),o.a.createElement("div",{class:"header-button header-button-right m-header-button",onClick:this.loadPosts},o.a.createElement("img",{src:"https://uploads-ssl.webflow.com/5cb9fe80c114993f85aebed2/5cfd8266982a747870f23408_bsvnews%20refresh.png",width:"14",height:"14",alt:"",class:"image"})),o.a.createElement("div",{className:"header-button header-button-right",onClick:function(){return t.setState({showDropdown:!t.state.showDropdown})}},o.a.createElement("div",{className:"header-button-text"},this.state.username),o.a.createElement("div",{className:"header-button-text button-symbol"},this.state.showDropdown?"\u25bc":"\u25b6"))):o.a.createElement("div",{className:"header-right"},o.a.createElement("div",{className:"header-button header-button-right",onClick:function(){return t.setState({showLoginAlert:!0})}},o.a.createElement("div",{className:"header-button-text"},"login"))),o.a.createElement("div",null,o.a.createElement("meta",{charSet:"utf-8"}),o.a.createElement("title",null,"bsvnews"),o.a.createElement("meta",{content:"width=device-width, initial-scale=1",name:"viewport"}),o.a.createElement("meta",{content:"Webflow",name:"generator"}),o.a.createElement(O.Helmet,null,o.a.createElement("title",null,"bsvnews"),o.a.createElement("script",{src:"https://tonicpow.com/tonic.js"})),o.a.createElement("div",{className:"container w-container",style:{paddingBottom:10}},o.a.createElement("div",{className:"header"},o.a.createElement("div",{className:"header-left"},o.a.createElement("div",{className:"title"},"BSV News"),o.a.createElement("div",{className:"button-container"},"today"==this.state.dateRange?o.a.createElement("div",{className:"header-button",onClick:this.switchMode}," ",o.a.createElement("div",{className:"header-button-text"},"top"==this.state.mode?"new":"top"," ")," "):null,o.a.createElement("div",{className:"header-button",onClick:this.submitHandler}," ",o.a.createElement("div",{className:"header-button-text"},this.state.posting?" X ":"submit")),o.a.createElement("div",{className:"header-button",onClick:this.loadPosts}," ",o.a.createElement("div",{className:"header-button-text"},"reload")),o.a.createElement("div",{className:"header-button",onClick:this.toggleDateRange}," ",o.a.createElement("div",{className:"header-button-text"},"today"==this.state.dateRange?"weekly":"today")))),r),this.state.showDropdown?i:null,this.state.showLoginAlert?o.a.createElement(C,{votePriceChangeHandler:this.votePriceChangeHandler,xHandler:this.hideLoginAlert,loginHandler:this.loginHandler,changingUsername:this.state.changingUsername,changingVotePrice:this.state.changingVotePrice}):null,this.state.posting?o.a.createElement(k,{username:this.state.username,userId:this.state.userId,finishSubmitHandler:this.submitHandler}):null,o.a.createElement("div",{className:"posts"},a),this.state.replying?o.a.createElement(P,{hideReply:this.hideReplyFormHandler,replyingTo:this.state.replyingTo,username:this.state.username,userId:this.state.userId}):null,o.a.createElement("div",{className:"metadata",style:{width:"100%",padding:10,paddingBottom:0,paddingRight:20,display:"flex",justifyContent:"flex-end"}}," ",this.state.votePrice," Created by $canyouhandleme")),o.a.createElement("div",{className:"tonic-pow"},o.a.createElement("div",{style:{margin:"auto"},class:"tonic","data-address":"1BvrRxhXAVsZKyMnBT1STkXXVnsXrm7BNm"})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(R,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[20,1,2]]]);
//# sourceMappingURL=main.3718ee98.chunk.js.map